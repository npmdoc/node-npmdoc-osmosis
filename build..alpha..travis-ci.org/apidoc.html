<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/rchipka/node-osmosis#readme"

    >osmosis (v1.1.4)</a>
</h1>
<h4>Web scraper for NodeJS</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis">module osmosis</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.osmosis">
            function <span class="apidocSignatureSpan"></span>osmosis
            <span class="apidocSignatureSpan">(url, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command">
            function <span class="apidocSignatureSpan">osmosis.</span>Command
            <span class="apidocSignatureSpan">(parent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data">
            function <span class="apidocSignatureSpan">osmosis.</span>Data
            <span class="apidocSignatureSpan">(parent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Queue">
            function <span class="apidocSignatureSpan">osmosis.</span>Queue
            <span class="apidocSignatureSpan">(instance)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.click">
            function <span class="apidocSignatureSpan">osmosis.</span>click
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.config">
            function <span class="apidocSignatureSpan">osmosis.</span>config
            <span class="apidocSignatureSpan">(option, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.contains">
            function <span class="apidocSignatureSpan">osmosis.</span>contains
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.cookie">
            function <span class="apidocSignatureSpan">osmosis.</span>cookie
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.data">
            function <span class="apidocSignatureSpan">osmosis.</span>data
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.debug">
            function <span class="apidocSignatureSpan">osmosis.</span>debug
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.delay">
            function <span class="apidocSignatureSpan">osmosis.</span>delay
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.do">
            function <span class="apidocSignatureSpan">osmosis.</span>do
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.document">
            function <span class="apidocSignatureSpan">osmosis.</span>document
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.done">
            function <span class="apidocSignatureSpan">osmosis.</span>done
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.else">
            function <span class="apidocSignatureSpan">osmosis.</span>else
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.end">
            function <span class="apidocSignatureSpan">osmosis.</span>end
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.error">
            function <span class="apidocSignatureSpan">osmosis.</span>error
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.fail">
            function <span class="apidocSignatureSpan">osmosis.</span>fail
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.filter">
            function <span class="apidocSignatureSpan">osmosis.</span>filter
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.find">
            function <span class="apidocSignatureSpan">osmosis.</span>find
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.findCommandArg">
            function <span class="apidocSignatureSpan">osmosis.</span>findCommandArg
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.follow">
            function <span class="apidocSignatureSpan">osmosis.</span>follow
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.get">
            function <span class="apidocSignatureSpan">osmosis.</span>get
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.getInstance">
            function <span class="apidocSignatureSpan">osmosis.</span>getInstance
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.getOpts">
            function <span class="apidocSignatureSpan">osmosis.</span>getOpts
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.header">
            function <span class="apidocSignatureSpan">osmosis.</span>header
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.headers">
            function <span class="apidocSignatureSpan">osmosis.</span>headers
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.if">
            function <span class="apidocSignatureSpan">osmosis.</span>if
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.inherit">
            function <span class="apidocSignatureSpan">osmosis.</span>inherit
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.isCommand">
            function <span class="apidocSignatureSpan">osmosis.</span>isCommand
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.learn">
            function <span class="apidocSignatureSpan">osmosis.</span>learn
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.log">
            function <span class="apidocSignatureSpan">osmosis.</span>log
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.login">
            function <span class="apidocSignatureSpan">osmosis.</span>login
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.match">
            function <span class="apidocSignatureSpan">osmosis.</span>match
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.paginate">
            function <span class="apidocSignatureSpan">osmosis.</span>paginate
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.parse">
            function <span class="apidocSignatureSpan">osmosis.</span>parse
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.pause">
            function <span class="apidocSignatureSpan">osmosis.</span>pause
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.post">
            function <span class="apidocSignatureSpan">osmosis.</span>post
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.proxy">
            function <span class="apidocSignatureSpan">osmosis.</span>proxy
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.request">
            function <span class="apidocSignatureSpan">osmosis.</span>request
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.resume">
            function <span class="apidocSignatureSpan">osmosis.</span>resume
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.rewrite">
            function <span class="apidocSignatureSpan">osmosis.</span>rewrite
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.run">
            function <span class="apidocSignatureSpan">osmosis.</span>run
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.select">
            function <span class="apidocSignatureSpan">osmosis.</span>select
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.set">
            function <span class="apidocSignatureSpan">osmosis.</span>set
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.setInstance">
            function <span class="apidocSignatureSpan">osmosis.</span>setInstance
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.setOpt">
            function <span class="apidocSignatureSpan">osmosis.</span>setOpt
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.start">
            function <span class="apidocSignatureSpan">osmosis.</span>start
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.stop">
            function <span class="apidocSignatureSpan">osmosis.</span>stop
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.submit">
            function <span class="apidocSignatureSpan">osmosis.</span>submit
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.success">
            function <span class="apidocSignatureSpan">osmosis.</span>success
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.then">
            function <span class="apidocSignatureSpan">osmosis.</span>then
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.train">
            function <span class="apidocSignatureSpan">osmosis.</span>train
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.trigger">
            function <span class="apidocSignatureSpan">osmosis.</span>trigger
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.use">
            function <span class="apidocSignatureSpan">osmosis.</span>use
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.using">
            function <span class="apidocSignatureSpan">osmosis.</span>using
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.window">
            function <span class="apidocSignatureSpan">osmosis.</span>window
            <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">osmosis.</span>Command.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">osmosis.</span>Data.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">osmosis.</span>Form</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">osmosis.</span>Queue.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.Command">module osmosis.Command</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.Command">
            function <span class="apidocSignatureSpan">osmosis.</span>Command
            <span class="apidocSignatureSpan">(parent)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.Command.prototype">module osmosis.Command.prototype</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>isCommand</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.click">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>click
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.config">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>config
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.contains">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>contains
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.cookie">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>cookie
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.data">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>data
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.debug">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>debug
            <span class="apidocSignatureSpan">(msg, prefixed)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.delay">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>delay
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.do">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>do
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.done">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>done
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.end">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>end
            <span class="apidocSignatureSpan">(context, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.error">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>error
            <span class="apidocSignatureSpan">(msg, prefixed)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.fail">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>fail
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.filter">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>filter
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.find">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>find
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.findCommandArg">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>findCommandArg
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.follow">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>follow
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.get">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>get
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.getInstance">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>getInstance
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.getOpts">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>getOpts
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.header">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>header
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.headers">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>headers
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.if">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>if
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.inherit">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>inherit
            <span class="apidocSignatureSpan">(command)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.learn">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>learn
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.log">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>log
            <span class="apidocSignatureSpan">(msg, prefixed)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.login">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>login
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.match">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>match
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.paginate">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>paginate
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.parse">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>parse
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.pause">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>pause
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.post">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>post
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.proxy">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>proxy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.request">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>request
            <span class="apidocSignatureSpan">(method, context, href, params, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.resume">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>resume
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.rewrite">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>rewrite
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.run">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>run
            <span class="apidocSignatureSpan">(context, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.select">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>select
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.set">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>set
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.setInstance">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>setInstance
            <span class="apidocSignatureSpan">(val)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.setOpt">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>setOpt
            <span class="apidocSignatureSpan">(name, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.start">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>start
            <span class="apidocSignatureSpan">(context, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.stop">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>stop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.submit">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>submit
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.success">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>success
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.then">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>then
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.train">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>train
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.trigger">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>trigger
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.use">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>use
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Command.prototype.using">
            function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>using
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.Data">module osmosis.Data</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.Data">
            function <span class="apidocSignatureSpan">osmosis.</span>Data
            <span class="apidocSignatureSpan">(parent)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.Data.prototype">module osmosis.Data.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.child">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>child
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.clone">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>clone
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.copy">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>copy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.done">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>done
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.extend">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>extend
            <span class="apidocSignatureSpan">(object)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.getIndex">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>getIndex
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.getObject">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>getObject
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.isArray">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>isArray
            <span class="apidocSignatureSpan">(val)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.isEmpty">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>isEmpty
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.merge">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>merge
            <span class="apidocSignatureSpan">(child)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.next">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>next
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.push">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>push
            <span class="apidocSignatureSpan">(val)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.ref">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>ref
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.set">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>set
            <span class="apidocSignatureSpan">(key, val)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.setIndex">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>setIndex
            <span class="apidocSignatureSpan">(index)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.setObject">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>setObject
            <span class="apidocSignatureSpan">(object)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.toArray">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>toArray
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Data.prototype.unref">
            function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>unref
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.Form">module osmosis.Form</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Form.getAction">
            function <span class="apidocSignatureSpan">osmosis.Form.</span>getAction
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Form.getEnctype">
            function <span class="apidocSignatureSpan">osmosis.Form.</span>getEnctype
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Form.getForm">
            function <span class="apidocSignatureSpan">osmosis.Form.</span>getForm
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Form.getInputs">
            function <span class="apidocSignatureSpan">osmosis.Form.</span>getInputs
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Form.getMethod">
            function <span class="apidocSignatureSpan">osmosis.Form.</span>getMethod
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Form.getParams">
            function <span class="apidocSignatureSpan">osmosis.Form.</span>getParams
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Form.getSubmitButton">
            function <span class="apidocSignatureSpan">osmosis.Form.</span>getSubmitButton
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Form.isForm">
            function <span class="apidocSignatureSpan">osmosis.Form.</span>isForm
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Form.isMultipart">
            function <span class="apidocSignatureSpan">osmosis.Form.</span>isMultipart
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Form.submit">
            function <span class="apidocSignatureSpan">osmosis.Form.</span>submit
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.Queue">module osmosis.Queue</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Queue.Queue">
            function <span class="apidocSignatureSpan">osmosis.</span>Queue
            <span class="apidocSignatureSpan">(instance)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.Queue.prototype">module osmosis.Queue.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Queue.prototype.dequeue">
            function <span class="apidocSignatureSpan">osmosis.Queue.prototype.</span>dequeue
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Queue.prototype.enqueue">
            function <span class="apidocSignatureSpan">osmosis.Queue.prototype.</span>enqueue
            <span class="apidocSignatureSpan">(object)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Queue.prototype.pop">
            function <span class="apidocSignatureSpan">osmosis.Queue.prototype.</span>pop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.Queue.prototype.push">
            function <span class="apidocSignatureSpan">osmosis.Queue.prototype.</span>push
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">osmosis.Queue.prototype.</span>change</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">osmosis.Queue.prototype.</span>count</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">osmosis.Queue.prototype.</span>done</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">osmosis.Queue.prototype.</span>length</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">osmosis.Queue.prototype.</span>requests</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.click">module osmosis.click</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.click.click">
            function <span class="apidocSignatureSpan">osmosis.</span>click
            <span class="apidocSignatureSpan">(context, data, next, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.contains">module osmosis.contains</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.contains.contains">
            function <span class="apidocSignatureSpan">osmosis.</span>contains
            <span class="apidocSignatureSpan">(string)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.delay">module osmosis.delay</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.delay.delay">
            function <span class="apidocSignatureSpan">osmosis.</span>delay
            <span class="apidocSignatureSpan">(delay)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.do">module osmosis.do</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.do.do">
            function <span class="apidocSignatureSpan">osmosis.</span>do
            <span class="apidocSignatureSpan">(context, data, next, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.fail">module osmosis.fail</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.fail.fail">
            function <span class="apidocSignatureSpan">osmosis.</span>fail
            <span class="apidocSignatureSpan">(selector)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.filter">module osmosis.filter</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.filter.filter">
            function <span class="apidocSignatureSpan">osmosis.</span>filter
            <span class="apidocSignatureSpan">(selector)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.find">module osmosis.find</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.find.find">
            function <span class="apidocSignatureSpan">osmosis.</span>find
            <span class="apidocSignatureSpan">(selector)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.find.select">
            function <span class="apidocSignatureSpan">osmosis.find.</span>select
            <span class="apidocSignatureSpan">(selector)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.follow">module osmosis.follow</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.follow.follow">
            function <span class="apidocSignatureSpan">osmosis.</span>follow
            <span class="apidocSignatureSpan">(context, data, next, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.get">module osmosis.get</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.get.get">
            function <span class="apidocSignatureSpan">osmosis.</span>get
            <span class="apidocSignatureSpan">(url, query)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.get.post">
            function <span class="apidocSignatureSpan">osmosis.get.</span>post
            <span class="apidocSignatureSpan">(url, query)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.if">module osmosis.if</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.if.if">
            function <span class="apidocSignatureSpan">osmosis.</span>if
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.learn">module osmosis.learn</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.learn.learn">
            function <span class="apidocSignatureSpan">osmosis.</span>learn
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.login">module osmosis.login</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.login.login">
            function <span class="apidocSignatureSpan">osmosis.</span>login
            <span class="apidocSignatureSpan">(username, password)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.match">module osmosis.match</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.match.match">
            function <span class="apidocSignatureSpan">osmosis.</span>match
            <span class="apidocSignatureSpan">(regex)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.paginate">module osmosis.paginate</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.paginate.paginate">
            function <span class="apidocSignatureSpan">osmosis.</span>paginate
            <span class="apidocSignatureSpan">(selector, limit)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.parse">module osmosis.parse</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.parse.parse">
            function <span class="apidocSignatureSpan">osmosis.</span>parse
            <span class="apidocSignatureSpan">(context, data, next, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.rewrite">module osmosis.rewrite</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.rewrite.rewrite">
            function <span class="apidocSignatureSpan">osmosis.</span>rewrite
            <span class="apidocSignatureSpan">(context, data, next, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.set">module osmosis.set</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.set.set">
            function <span class="apidocSignatureSpan">osmosis.</span>set
            <span class="apidocSignatureSpan">(key, val)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.submit">module osmosis.submit</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.submit.submit">
            function <span class="apidocSignatureSpan">osmosis.</span>submit
            <span class="apidocSignatureSpan">(selector, params)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.success">module osmosis.success</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.success.success">
            function <span class="apidocSignatureSpan">osmosis.</span>success
            <span class="apidocSignatureSpan">(selector)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.then">module osmosis.then</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.then.then">
            function <span class="apidocSignatureSpan">osmosis.</span>then
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.train">module osmosis.train</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.train.train">
            function <span class="apidocSignatureSpan">osmosis.</span>train
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.trigger">module osmosis.trigger</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.trigger.trigger">
            function <span class="apidocSignatureSpan">osmosis.</span>trigger
            <span class="apidocSignatureSpan">(event, selector)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.use">module osmosis.use</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.use.use">
            function <span class="apidocSignatureSpan">osmosis.</span>use
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.osmosis.using">module osmosis.using</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.osmosis.using.using">
            function <span class="apidocSignatureSpan">osmosis.</span>using
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis" id="apidoc.module.osmosis">module osmosis</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.osmosis" id="apidoc.element.osmosis.osmosis">
        function <span class="apidocSignatureSpan"></span>osmosis
        <span class="apidocSignatureSpan">(url, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Osmosis(url, params) {
    if (url !== undefined) {
        if (this instanceof Osmosis) {
            return new Osmosis.get(url, params);
        }

        return Osmosis.get(url, params);
    }

    this.queue   = new Queue(this);
    this.command = new Command(this);
    this.id      = ++instanceId;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command" id="apidoc.element.osmosis.Command">
        function <span class="apidocSignatureSpan">osmosis.</span>Command
        <span class="apidocSignatureSpan">(parent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Command(parent) {
    var self = this;

    if (Object.getPrototypeOf(parent) === Command.prototype) {
        // parent is a Command
        this.prev = parent;
        Object.defineProperty(this, &#x27;instance&#x27;, {
            get: Command.prototype.getInstance,
            set: Command.prototype.setInstance
        });
    } else if (parent !== undefined) {
        // `parent` is an Osmosis instance
        this.instance = parent;
        // Call `process.nextTick` so other instances can initialize
        process.nextTick(function () {
            // Attempt to auto-run the instance only IF:
            //  * Not already running
            //  * Not created using `new`
            //  * Not a child instance
            if (parent.calledWithNew !== true &#x26;&#x26;
                parent.parent === undefined) {
                process.nextTick(function () {
                    // Run on nextTick to allow any
                    // runtimeCommands to finish first
                    parent.run();
                });
            }
        });
    }

    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data" id="apidoc.element.osmosis.Data">
        function <span class="apidocSignatureSpan">osmosis.</span>Data
        <span class="apidocSignatureSpan">(parent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Data(parent) {
    this.stack = { count: 0 };

    if (parent) {
        this.parent = parent;
    }

    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Queue" id="apidoc.element.osmosis.Queue">
        function <span class="apidocSignatureSpan">osmosis.</span>Queue
        <span class="apidocSignatureSpan">(instance)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Queue(instance) {
    this.instance = instance;
    this.opts = instance.opts;
    this.queue = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.click" id="apidoc.element.osmosis.click">
        function <span class="apidocSignatureSpan">osmosis.</span>click
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * DOM and css2xpath functionality have been moved to `libxmljs-dom`
 * Added `keep_data` option to retain the original HTTP response
 * Added `process_response` option for processing data before parsing
 * Added test suite

#### `click`

 * Added `.<span class="apidocCodeKeywordSpan">click</span>()` for interacting with JS-only content

#### `delay`

 * Added `.delay(n)` for waiting n seconds before calling next. Accepts a decimal value.

#### `find`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.config" id="apidoc.element.osmosis.config">
        function <span class="apidocSignatureSpan">osmosis.</span>config
        <span class="apidocSignatureSpan">(option, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">config = function (option, value) {
    var hasPrototype = (this.prototype !== undefined),
        opts, key;

    if (hasPrototype === true) {
        opts = this.prototype.opts;
    } else if (this.opts === undefined) {
        opts = this.opts = {};
    } else {
        opts = this.opts;
    }

    if (option === undefined) {
        return opts;
    }

    if (value !== undefined) {
        opts[option] = value;
    } else if (key !== undefined) {
        for (key in option) {
            opts[key] = option[key];
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @param {function} callback - Callback
 */

[&#x27;log&#x27;, &#x27;error&#x27;, &#x27;debug&#x27;].forEach(function (name) {
Command.prototype[name] = function (msg, prefixed) {
    if (msg instanceof Function) {
        this[name] = msg;
        this.instance.<span class="apidocCodeKeywordSpan">config</span>(name, true);
    } else if (this.next !== undefined) {
        if (prefixed === undefined) {
            this.next[name](&#x27;(&#x27; + this.name + &#x27;) &#x27; + msg, &#x27;&#x27;);
        } else {
            this.next[name](msg, &#x27;&#x27;);
        }
    } else if (this.instance.parent !== undefined) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.contains" id="apidoc.element.osmosis.contains">
        function <span class="apidocSignatureSpan">osmosis.</span>contains
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `config`

 * Configuration options are inherited down the chain

#### `contains`

 * Added `.<span class="apidocCodeKeywordSpan">contains</span>(string)` to discard nodes whose contents do not match `string`

#### `do`

 * Added `.do()` to call one or more commands using the current context

#### `failure` (or `fail`)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.cookie" id="apidoc.element.osmosis.cookie">
        function <span class="apidocSignatureSpan">osmosis.</span>cookie
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    osmosis(url + &#x27;/headers&#x27;)
.then(function (context) {
    assert.ok(context.querySelector(&#x27;cookie&#x27;));
    assert.equal(context.querySelector(&#x27;cookie&#x27;).textContent,
                &#x27;gc1=set&#x27;);
})
.post(url + &#x27;/headers&#x27;)
.<span class="apidocCodeKeywordSpan">cookie</span>(&#x27;c1&#x27;, &#x27;yes&#x27;)
.then(function (context) {
    assert.ok(context.querySelector(&#x27;cookie&#x27;));
    assert.equal(context.querySelector(&#x27;cookie&#x27;).textContent,
                &#x27;gc1=set; c1=yes&#x27;);
})
.done(function () {
    osmosis.config(&#x27;cookies&#x27;, {});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.data" id="apidoc.element.osmosis.data">
        function <span class="apidocSignatureSpan">osmosis.</span>data
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
#### `set`

* Supports innerHTML using `:html` or `:source` in selectors
* Supports deep JSON structures and nested Osmosis instances

#### `data`

* `.<span class="apidocCodeKeywordSpan">data</span>(null)` clears the data object
* `.data({})` appends keys to data object

#### `dom`

* `.dom()` is continuing progress and can now run jQuery
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.debug" id="apidoc.element.osmosis.debug">
        function <span class="apidocSignatureSpan">osmosis.</span>debug
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        nodes = (nodes / 1000).toFixed(0) + &#x27;k&#x27;;
    }

    if (memDiff.charAt(0) !== &#x27;-&#x27;) {
        memDiff = &#x27;+&#x27; + memDiff;
    }

    this.command.<span class="apidocCodeKeywordSpan">debug</span>(
&#x27;stack: &#x27;    + this.queue.count + &#x27;, &#x27; +

&#x27;requests: &#x27; + this.requests +
             &#x27; (&#x27; + this.queue.requests + &#x27; queued), &#x27; +

&#x27;RAM: &#x27;      + toMB(mem.rss) + &#x27; (&#x27; + memDiff + &#x27;), &#x27; +
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.delay" id="apidoc.element.osmosis.delay">
        function <span class="apidocSignatureSpan">osmosis.</span>delay
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `click`

 * Added `.click()` for interacting with JS-only content

#### `delay`

 * Added `.<span class="apidocCodeKeywordSpan">delay</span>(n)` for waiting n seconds before calling next. Accepts a decimal value
.

#### `find`

 * Accepts an array of selectors as the first argument

#### `follow`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.do" id="apidoc.element.osmosis.do">
        function <span class="apidocSignatureSpan">osmosis.</span>do
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `contains`

 * Added `.contains(string)` to discard nodes whose contents do not match `string`

#### `do`

 * Added `.<span class="apidocCodeKeywordSpan">do</span>()` to call one or more commands using the current context

#### `failure` (or `fail`)

 * Added `.failure(selector)` to discard nodes that match the given selector

#### `filter` (or `success`)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.document" id="apidoc.element.osmosis.document">
        function <span class="apidocSignatureSpan">osmosis.</span>document
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.done" id="apidoc.element.osmosis.done">
        function <span class="apidocSignatureSpan">osmosis.</span>done
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (--self.count === 0) {
    process.nextTick(function () {
        var instance;

        if (self.count === 0) {
            instance = self.instance;
            instance.command.<span class="apidocCodeKeywordSpan">done</span>();

            if (instance.opts.debug === true) {
                instance.resources();
            }
        }
    });
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.else" id="apidoc.element.osmosis.else">
        function <span class="apidocSignatureSpan">osmosis.</span>else
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *
 * @property else
 * @private
 * @see {@link Command.if}
 */

get else() {
     return this.<span class="apidocCodeKeywordSpan">else</span>();
 },

inherit: function (command) {
    command.instance = this.instance;

    return command;
},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.end" id="apidoc.element.osmosis.end">
        function <span class="apidocSignatureSpan">osmosis.</span>end
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });

    return;
}

if (callback === undefined)  {
    if (next === undefined) {
        this.<span class="apidocCodeKeywordSpan">end</span>(context, data);
    } else {
        next.start(context, data);
    }

    return;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.error" id="apidoc.element.osmosis.error">
        function <span class="apidocSignatureSpan">osmosis.</span>error
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            function (err, res, data) {
                var proxies = opts.proxies;

                self.queue.requests--;

                if ((res === undefined || res.statusCode !== 404) &#x26;&#x26;
proxies !== undefined) {
self.command.<span class="apidocCodeKeywordSpan">error</span>(&#x27;proxy &#x27; + (proxies.index + 1) +
                    &#x27;/&#x27; + proxies.length +
                    &#x27; failed (&#x27; + opts.proxy + &#x27;)&#x27;);

// remove the failing proxy
if (proxies.length &#x3e; 1) {
    opts.proxies.splice(proxies.index, 1);
    opts.proxy = proxies[proxies.index];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.fail" id="apidoc.element.osmosis.fail">
        function <span class="apidocSignatureSpan">osmosis.</span>fail
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

module.exports.fail = function (assert) {
var count = 0, errored = false;

osmosis
.parse(html)
.find(&#x22;b&#x22;)
.<span class="apidocCodeKeywordSpan">fail</span>(&#x22;node():contains(&#x27;1&#x27;)&#x22;)
.then(function () {
    count++;
})
.error(function (msg) {
    if (msg.indexOf(&#x27;node():contains&#x27;) &#x3e; -1) {
        errored = true;
    }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.filter" id="apidoc.element.osmosis.filter">
        function <span class="apidocSignatureSpan">osmosis.</span>filter
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `failure` (or `fail`)

* Added `.failure(selector)` to discard nodes that match the given selector

#### `filter` (or `success`)

* Added `.<span class="apidocCodeKeywordSpan">filter</span>(selector)` to discard nodes that do not match the given selector

#### `get`

* Accepts a tokenized URL string
   * @{...} - Request info (url, method, params, headers, etc.)
   * %{...} - `data` object
   * ${...} - `context` search
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.find" id="apidoc.element.osmosis.find">
        function <span class="apidocSignatureSpan">osmosis.</span>find
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// libxmljs overrides:

libxml.Document.prototype.findXPath = libxml.Document.prototype.find;
libxml.Element.prototype.findXPath  = libxml.Element.prototype.find;

libxml.Document.prototype.find = function (selector, cache) {
return this.root().<span class="apidocCodeKeywordSpan">find</span>(selector, cache);
};

libxml.Element.prototype.find = function (selector) {
if (selector.charAt(1) === &#x27;/&#x27; ||
    selector.charAt(0) === &#x27;/&#x27; ||
    selector.charAt(0) === &#x27;(&#x27;) {
    return this.findXPath(selector);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.findCommandArg" id="apidoc.element.osmosis.findCommandArg">
        function <span class="apidocSignatureSpan">osmosis.</span>findCommandArg
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

args = new Array(length);

for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
    args[i] = arguments[i];

    if (typeof args[i] === &#x27;object&#x27;) {
        args[i] = this.<span class="apidocCodeKeywordSpan">findCommandArg</span>(args[i]);
    }
}

self.args = args;

if (func.length === 4) {
    self.cb = func;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.follow" id="apidoc.element.osmosis.follow">
        function <span class="apidocSignatureSpan">osmosis.</span>follow
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
var osmosis = require(&#x27;osmosis&#x27;);

osmosis
.get(&#x27;www.craigslist.org/about/sites&#x27;)
.find(&#x27;h1 + div a&#x27;)
.set(&#x27;location&#x27;)
.<span class="apidocCodeKeywordSpan">follow</span>(&#x27;@href&#x27;)
.find(&#x27;header + div + div li &#x3e; a&#x27;)
.set(&#x27;category&#x27;)
.follow(&#x27;@href&#x27;)
.paginate(&#x27;.totallink + a.button.next:first&#x27;)
.find(&#x27;p &#x3e; a&#x27;)
.follow(&#x27;@href&#x27;)
.set({
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.get" id="apidoc.element.osmosis.get">
        function <span class="apidocSignatureSpan">osmosis.</span>get
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {object} [params] - GET query parameters
* @returns Command
* @see {@link Command.run}
*
* @example {@lang javascript}
*
* // These instances start immediately
* osmosis.<span class="apidocCodeKeywordSpan">get</span>(&#x27;http://example.com&#x27;);
* osmosis(&#x27;http://example.com&#x27;);
*
* // These instances need started
* instance = new osmosis.get(&#x27;http://example.com&#x27;);
* instance.run();
*
* instance = new osmosis(&#x27;http://example.com&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.getInstance" id="apidoc.element.osmosis.getInstance">
        function <span class="apidocSignatureSpan">osmosis.</span>getInstance
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.getOpts" id="apidoc.element.osmosis.getOpts">
        function <span class="apidocSignatureSpan">osmosis.</span>getOpts
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var proto;

if (this.opts !== undefined) {
    return this.opts;
}

if (this.prev !== undefined) {
    proto = this.prev.<span class="apidocCodeKeywordSpan">getOpts</span>();
} else if (this.instance !== undefined) {
    proto = this.instance.opts;
}

this.opts = Object.create(proto);

return this.opts;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.header" id="apidoc.element.osmosis.header">
        function <span class="apidocSignatureSpan">osmosis.</span>header
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

module.exports.headers = function (assert) {
    var calledThen = false;

    osmosis
    .get(url + &#x27;/headers&#x27;)
    .<span class="apidocCodeKeywordSpan">header</span>(&#x27;one&#x27;, 1)
    .headers({ &#x27;test&#x27;: true })
    .then(function (context) {
var opts = this.getOpts();

calledThen = true;

assert.equal(opts.headers.one, 1);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.headers" id="apidoc.element.osmosis.headers">
        function <span class="apidocSignatureSpan">osmosis.</span>headers
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

module.exports.headers = function (assert) {
    var calledThen = false;

    osmosis
    .get(url + &#x27;/headers&#x27;)
    .header(&#x27;one&#x27;, 1)
    .<span class="apidocCodeKeywordSpan">headers</span>({ &#x27;test&#x27;: true })
    .then(function (context) {
var opts = this.getOpts();

calledThen = true;

assert.equal(opts.headers.one, 1);
assert.equal(opts.headers.test, true);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.if" id="apidoc.element.osmosis.if">
        function <span class="apidocSignatureSpan">osmosis.</span>if
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.inherit" id="apidoc.element.osmosis.inherit">
        function <span class="apidocSignatureSpan">osmosis.</span>inherit
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.isCommand" id="apidoc.element.osmosis.isCommand">
        function <span class="apidocSignatureSpan">osmosis.</span>isCommand
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.learn" id="apidoc.element.osmosis.learn">
        function <span class="apidocSignatureSpan">osmosis.</span>learn
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



# Changelog

#### TODO:

* Add `.<span class="apidocCodeKeywordSpan">learn</span>()` to generate a selector for a selected node
* Add `.listen()` for easily creating DOM event listeners
* Add `.trigger()` for easily triggering DOM events
* Add `.on()` for binding callback to a local-only event
* Add `.url()` to set the current URL
* Add `.params()` to set the current URL parameters
* Add `.save()` to save response data to a file
* Add `.add()`, `.remove()` for node creation/deletion?
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.log" id="apidoc.element.osmosis.log">
        function <span class="apidocSignatureSpan">osmosis.</span>log
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
               }

               self.dequeueRequest();
               self.queue.pop();
           })
           .on(&#x27;redirect&#x27;, function (new_url) {
               if (self.opts.log === true) {
                   self.command.<span class="apidocCodeKeywordSpan">log</span>(&#x27;[redirect] &#x27; +
                                    href + &#x27; -&#x3e; &#x27; + new_url);
               }
           });
};

/**
* Add a request to the queue.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.login" id="apidoc.element.osmosis.login">
        function <span class="apidocSignatureSpan">osmosis.</span>login
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
pass = &#x27;pass&#x27;;

module.exports.form = function (assert) {
var errors = 0;

osmosis
.get(url + &#x27;/form&#x27;)
.<span class="apidocCodeKeywordSpan">login</span>(user, pass)
.success(&#x27;div:contains(&#x22;authenticated&#x22;)&#x27;)
.then(function (context) {
    assert.equal(context.get(&#x27;div&#x27;).text(), &#x27;authenticated&#x27;);
})
.follow(&#x27;a&#x27;)
.then(function (context) {
    var div = context.get(&#x27;div&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.match" id="apidoc.element.osmosis.match">
        function <span class="apidocSignatureSpan">osmosis.</span>match
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `headers` (or `header`)

* Added `headers({ key: value })` and `header(key, value)` to set HTTP headers

#### `match`

 * Added `.<span class="apidocCodeKeywordSpan">match</span>([selector], RegExp)` to discard nodes whose contents do not match

#### `rewrite`

 * Added `.rewrite(callback)` to set a URL rewriting function for the preceding request

### Internal changes:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.paginate" id="apidoc.element.osmosis.paginate">
        function <span class="apidocSignatureSpan">osmosis.</span>paginate
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.get(&#x27;www.craigslist.org/about/sites&#x27;)
.find(&#x27;h1 + div a&#x27;)
.set(&#x27;location&#x27;)
.follow(&#x27;@href&#x27;)
.find(&#x27;header + div + div li &#x3e; a&#x27;)
.set(&#x27;category&#x27;)
.follow(&#x27;@href&#x27;)
.<span class="apidocCodeKeywordSpan">paginate</span>(&#x27;.totallink + a.button.next:first&#x27;)
.find(&#x27;p &#x3e; a&#x27;)
.follow(&#x27;@href&#x27;)
.set({
&#x27;title&#x27;:        &#x27;section &#x3e; h2&#x27;,
&#x27;description&#x27;:  &#x27;#postingbody&#x27;,
&#x27;subcategory&#x27;:  &#x27;div.breadbox &#x3e; span[4]&#x27;,
&#x27;date&#x27;:         &#x27;time@datetime&#x27;,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.parse" id="apidoc.element.osmosis.parse">
        function <span class="apidocSignatureSpan">osmosis.</span>parse
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (length === 3) {
        opts.parse = false;
    }

    if (context !== undefined) {
        document = context.doc();

        url = URL.<span class="apidocCodeKeywordSpan">parse</span>(document.location.resolve(href), true);

        if (opts.follow_set_referer !== false) {
if (opts.headers === undefined) {
    opts.headers = {};
}

opts.headers.referer = document.location.href;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.pause" id="apidoc.element.osmosis.pause">
        function <span class="apidocSignatureSpan">osmosis.</span>pause
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    instance.run();

    setTimeout(function () {
        paused = true;
        assert.ok(count &#x3e; 0);
        assert.ok(count &#x3c; pages);
        instance.<span class="apidocCodeKeywordSpan">pause</span>();

        setTimeout(function () {
            paused = false;
            instance.resume();
        }, 300);
    }, 300);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.post" id="apidoc.element.osmosis.post">
        function <span class="apidocSignatureSpan">osmosis.</span>post
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    osmosis(url + &#x27;/headers&#x27;)
.then(function (context) {
    assert.ok(context.querySelector(&#x27;cookie&#x27;));
    assert.equal(context.querySelector(&#x27;cookie&#x27;).textContent,
                &#x27;gc1=set&#x27;);
})
.<span class="apidocCodeKeywordSpan">post</span>(url + &#x27;/headers&#x27;)
.cookie(&#x27;c1&#x27;, &#x27;yes&#x27;)
.then(function (context) {
    assert.ok(context.querySelector(&#x27;cookie&#x27;));
    assert.equal(context.querySelector(&#x27;cookie&#x27;).textContent,
                &#x27;gc1=set; c1=yes&#x27;);
})
.done(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.proxy" id="apidoc.element.osmosis.proxy">
        function <span class="apidocSignatureSpan">osmosis.</span>proxy
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

## 0.1.1

* `proxy` option can now be an array of multiple proxies

#### `proxy`

* Added `.<span class="apidocCodeKeywordSpan">proxy</span>()` to easily set the `proxy` configuration option

#### `then`

* If the first argument&#x27;s name is:
   * &#x22;document&#x22; - The callback is given the current document
   * &#x22;window&#x22; - The callback is given the Window object
   * &#x22;$&#x22; - The callback is given a jQuery object (if available)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.request" id="apidoc.element.osmosis.request">
        function <span class="apidocSignatureSpan">osmosis.</span>request
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
                                       callback,
                                       tries) {
if (tries === undefined) {
    tries = 0;
}

if (this.queue.requests &#x3c; this.opts.concurrency) {
    this.<span class="apidocCodeKeywordSpan">request</span>(url, opts, callback, tries);
} else {
    this.queue.enqueue([url, opts, callback, tries]);
}
};

Osmosis.prototype.dequeueRequest = function () {
var arr, length = this.queue.length;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.resume" id="apidoc.element.osmosis.resume">
        function <span class="apidocSignatureSpan">osmosis.</span>resume
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

if (instance.stopped === true) {
    return;
}

if (instance.paused  === true) {
    instance.<span class="apidocCodeKeywordSpan">resume</span>(function () {
        self.start(context, data);
    });

    return;
}

if (callback === undefined)  {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.rewrite" id="apidoc.element.osmosis.rewrite">
        function <span class="apidocSignatureSpan">osmosis.</span>rewrite
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `match`

 * Added `.match([selector], RegExp)` to discard nodes whose contents do not match

#### `rewrite`

 * Added `.<span class="apidocCodeKeywordSpan">rewrite</span>(callback)` to set a URL rewriting function for the preceding request

### Internal changes:

 * `promise.args` is now an object (used to be an array)
 * HTTP 400 errors are now logged and the requests are retried.

## 0.0.9
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.run" id="apidoc.element.osmosis.run">
        function <span class="apidocSignatureSpan">osmosis.</span>run
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *
 * // These instances start immediately
 * osmosis.get(&#x27;http://example.com&#x27;);
 * osmosis(&#x27;http://example.com&#x27;);
 *
 * // These instances need started
 * instance = new osmosis.get(&#x27;http://example.com&#x27;);
 * instance.<span class="apidocCodeKeywordSpan">run</span>();
 *
 * instance = new osmosis(&#x27;http://example.com&#x27;);
 * instance.run();
 */

function Osmosis(url, params) {
if (url !== undefined) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.select" id="apidoc.element.osmosis.select">
        function <span class="apidocSignatureSpan">osmosis.</span>select
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

module.exports.select = function (assert) {
var count = 0;

osmosis.get(url + &#x27;/find&#x27;)
.find(&#x27;ul:last &#x3e; li:last&#x27;)
.<span class="apidocCodeKeywordSpan">select</span>(&#x27;b&#x27;)
.then(function () {
    count++;
})
.done(function () {
    assert.equal(count, 2);
    assert.done();
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.set" id="apidoc.element.osmosis.set">
        function <span class="apidocSignatureSpan">osmosis.</span>set
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* Replaces previously set values

### Internal changes:

* Enhanced stack counting
* Added data object ref counting
* Added domain specific cookie handling
* Improved stability of deep instance nesting with `.<span class="apidocCodeKeywordSpan">set</span>()`
* Osmosis instances operate more independently
* Request queues are now a single array for each instance
* Promises must accept and call `done` if they asynchronously
  send more than one output context per input context
* If `.then` sends more than one output context per input context,
  then it must accept `done()` as its last argument and
  call it after calling `next()` for the last time.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.setInstance" id="apidoc.element.osmosis.setInstance">
        function <span class="apidocSignatureSpan">osmosis.</span>setInstance
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.setOpt" id="apidoc.element.osmosis.setOpt">
        function <span class="apidocSignatureSpan">osmosis.</span>setOpt
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var opts = this.getOpts(), headers;

    if (opts.hasOwnProperty(&#x27;headers&#x27;)) {
        opts.headers[name] = value;
    } else {
        headers = {};
        headers[name] = value;
        this.<span class="apidocCodeKeywordSpan">setOpt</span>(&#x27;headers&#x27;, headers);
    }

    return this;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.start" id="apidoc.element.osmosis.start">
        function <span class="apidocSignatureSpan">osmosis.</span>start
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @see {@link Command.run}
*/
Osmosis.prototype.run = function () {
   var self = this;

   process.nextTick(function () {
       self.started  = true;
       self.command.<span class="apidocCodeKeywordSpan">start</span>();
   });
};

/**
* Make an HTTP request.
*
* @private
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.stop" id="apidoc.element.osmosis.stop">
        function <span class="apidocSignatureSpan">osmosis.</span>stop
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
osmosis.get(url + &#x27;/delay-response&#x27;)
.follow(&#x27;a&#x27;)
.follow(&#x27;a&#x27;)
.follow(&#x27;a&#x27;)
.log(function (msg) {
    if (msg.indexOf(&#x27;loaded&#x27;) &#x3e; -1) {
        if (++count === 2) {
            instance.<span class="apidocCodeKeywordSpan">stop</span>();
        }
    }
})
.then(function () {
    error = true;
})
.done(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.submit" id="apidoc.element.osmosis.submit">
        function <span class="apidocSignatureSpan">osmosis.</span>submit
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *       Add input[name] case-insensitivity tests
 */

module.exports.form1 = function (assert) {
var calledThen = false;

osmosis.get(url + &#x27;/submit-form&#x27;)
.<span class="apidocCodeKeywordSpan">submit</span>(&#x27;form&#x27;)
.then(function (context) {
    calledThen = true;
    assert.deepEqual(JSON.parse(context.get(&#x27;#data&#x27;).text()), getInputs(1, &#x27;sub1&#x27;));
})
.done(function () {
    assert.ok(calledThen);
    assert.done();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.success" id="apidoc.element.osmosis.success">
        function <span class="apidocSignatureSpan">osmosis.</span>success
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

module.exports.form = function (assert) {
var errors = 0;

osmosis
.get(url + &#x27;/form&#x27;)
.login(user, pass)
.<span class="apidocCodeKeywordSpan">success</span>(&#x27;div:contains(&#x22;authenticated&#x22;)&#x27;)
.then(function (context) {
    assert.equal(context.get(&#x27;div&#x27;).text(), &#x27;authenticated&#x27;);
})
.follow(&#x27;a&#x27;)
.then(function (context) {
    var div = context.get(&#x27;div&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.then" id="apidoc.element.osmosis.then">
        function <span class="apidocSignatureSpan">osmosis.</span>then
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            case &#x27;object&#x27;:
                if (obj[key] !== null) {
                    obj[key] = this.findCommandArg(obj[key]);
                }

                break;
            case &#x27;function&#x27;:
                obj[key] = this.findCommandArg(this.<span class="apidocCodeKeywordSpan">then</span>(obj[key]));
        }
    }

    return obj;
};

fs.readdirSync(cmdDir).forEach(function (file) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.train" id="apidoc.element.osmosis.train">
        function <span class="apidocSignatureSpan">osmosis.</span>train
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.trigger" id="apidoc.element.osmosis.trigger">
        function <span class="apidocSignatureSpan">osmosis.</span>trigger
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

# Changelog

#### TODO:

* Add `.learn()` to generate a selector for a selected node
* Add `.listen()` for easily creating DOM event listeners
* Add `.<span class="apidocCodeKeywordSpan">trigger</span>()` for easily triggering DOM events
* Add `.on()` for binding callback to a local-only event
* Add `.url()` to set the current URL
* Add `.params()` to set the current URL parameters
* Add `.save()` to save response data to a file
* Add `.add()`, `.remove()` for node creation/deletion?
* Add `.scroll()` to scrape infinite scroll pages
* Add warnings for parser errors?
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.use" id="apidoc.element.osmosis.use">
        function <span class="apidocSignatureSpan">osmosis.</span>use
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.using" id="apidoc.element.osmosis.using">
        function <span class="apidocSignatureSpan">osmosis.</span>using
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.window" id="apidoc.element.osmosis.window">
        function <span class="apidocSignatureSpan">osmosis.</span>window
        <span class="apidocSignatureSpan">(arg1, arg2, arg3)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StartingFunction(arg1, arg2, arg3) {
    var instance = new Osmosis(),
        command  = instance.command;

    instance.calledWithNew = (this instanceof StartingFunction);

    return command[name](arg1, arg2, arg3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>










</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.Command" id="apidoc.module.osmosis.Command">module osmosis.Command</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.Command.Command" id="apidoc.element.osmosis.Command.Command">
        function <span class="apidocSignatureSpan">osmosis.</span>Command
        <span class="apidocSignatureSpan">(parent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Command(parent) {
    var self = this;

    if (Object.getPrototypeOf(parent) === Command.prototype) {
        // parent is a Command
        this.prev = parent;
        Object.defineProperty(this, &#x27;instance&#x27;, {
            get: Command.prototype.getInstance,
            set: Command.prototype.setInstance
        });
    } else if (parent !== undefined) {
        // `parent` is an Osmosis instance
        this.instance = parent;
        // Call `process.nextTick` so other instances can initialize
        process.nextTick(function () {
            // Attempt to auto-run the instance only IF:
            //  * Not already running
            //  * Not created using `new`
            //  * Not a child instance
            if (parent.calledWithNew !== true &#x26;&#x26;
                parent.parent === undefined) {
                process.nextTick(function () {
                    // Run on nextTick to allow any
                    // runtimeCommands to finish first
                    parent.run();
                });
            }
        });
    }

    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.Command.prototype" id="apidoc.module.osmosis.Command.prototype">module osmosis.Command.prototype</a></h1>




    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.click" id="apidoc.element.osmosis.Command.prototype.click">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>click
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">click = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * DOM and css2xpath functionality have been moved to `libxmljs-dom`
 * Added `keep_data` option to retain the original HTTP response
 * Added `process_response` option for processing data before parsing
 * Added test suite

#### `click`

 * Added `.<span class="apidocCodeKeywordSpan">click</span>()` for interacting with JS-only content

#### `delay`

 * Added `.delay(n)` for waiting n seconds before calling next. Accepts a decimal value.

#### `find`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.config" id="apidoc.element.osmosis.Command.prototype.config">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>config
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">config = function () {
    var length   = arguments.length,
        self = this, args, i;

    if (length === 0) {
        // Allow `.config()`, etc. to get configuration
        // options during command chain compile time
        return func.call(self);
    }

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];
    }

    process.nextTick(function () {
        if (self.next !== undefined) {
            // We&#x27;re NOT on the last command, so we call `func` in the
            // context of the PRECEEDING command
            func.apply(self.prev, args);
        } else {
            // We&#x27;re on the last command, so we call `func` in the
            // context of the FIRST command
            func.apply(self.instance.command, args);
        }
    });

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @param {function} callback - Callback
 */

[&#x27;log&#x27;, &#x27;error&#x27;, &#x27;debug&#x27;].forEach(function (name) {
Command.prototype[name] = function (msg, prefixed) {
    if (msg instanceof Function) {
        this[name] = msg;
        this.instance.<span class="apidocCodeKeywordSpan">config</span>(name, true);
    } else if (this.next !== undefined) {
        if (prefixed === undefined) {
            this.next[name](&#x27;(&#x27; + this.name + &#x27;) &#x27; + msg, &#x27;&#x27;);
        } else {
            this.next[name](msg, &#x27;&#x27;);
        }
    } else if (this.instance.parent !== undefined) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.contains" id="apidoc.element.osmosis.Command.prototype.contains">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>contains
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">contains = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `config`

 * Configuration options are inherited down the chain

#### `contains`

 * Added `.<span class="apidocCodeKeywordSpan">contains</span>(string)` to discard nodes whose contents do not match `string`

#### `do`

 * Added `.do()` to call one or more commands using the current context

#### `failure` (or `fail`)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.cookie" id="apidoc.element.osmosis.Command.prototype.cookie">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>cookie
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cookie = function () {
    var length   = arguments.length,
        self = this, args, i;

    if (length === 0) {
        // Allow `.config()`, etc. to get configuration
        // options during command chain compile time
        return func.call(self);
    }

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];
    }

    process.nextTick(function () {
        if (self.next !== undefined) {
            // We&#x27;re NOT on the last command, so we call `func` in the
            // context of the PRECEEDING command
            func.apply(self.prev, args);
        } else {
            // We&#x27;re on the last command, so we call `func` in the
            // context of the FIRST command
            func.apply(self.instance.command, args);
        }
    });

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    osmosis(url + &#x27;/headers&#x27;)
.then(function (context) {
    assert.ok(context.querySelector(&#x27;cookie&#x27;));
    assert.equal(context.querySelector(&#x27;cookie&#x27;).textContent,
                &#x27;gc1=set&#x27;);
})
.post(url + &#x27;/headers&#x27;)
.<span class="apidocCodeKeywordSpan">cookie</span>(&#x27;c1&#x27;, &#x27;yes&#x27;)
.then(function (context) {
    assert.ok(context.querySelector(&#x27;cookie&#x27;));
    assert.equal(context.querySelector(&#x27;cookie&#x27;).textContent,
                &#x27;gc1=set; c1=yes&#x27;);
})
.done(function () {
    osmosis.config(&#x27;cookies&#x27;, {});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.data" id="apidoc.element.osmosis.Command.prototype.data">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>data
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">data = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
#### `set`

* Supports innerHTML using `:html` or `:source` in selectors
* Supports deep JSON structures and nested Osmosis instances

#### `data`

* `.<span class="apidocCodeKeywordSpan">data</span>(null)` clears the data object
* `.data({})` appends keys to data object

#### `dom`

* `.dom()` is continuing progress and can now run jQuery
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.debug" id="apidoc.element.osmosis.Command.prototype.debug">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>debug
        <span class="apidocSignatureSpan">(msg, prefixed)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">debug = function (msg, prefixed) {
    if (msg instanceof Function) {
        this[name] = msg;
        this.instance.config(name, true);
    } else if (this.next !== undefined) {
        if (prefixed === undefined) {
            this.next[name](&#x27;(&#x27; + this.name + &#x27;) &#x27; + msg, &#x27;&#x27;);
        } else {
            this.next[name](msg, &#x27;&#x27;);
        }
    } else if (this.instance.parent !== undefined) {
        this.instance.parent[name](msg, true);
    }

    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        nodes = (nodes / 1000).toFixed(0) + &#x27;k&#x27;;
    }

    if (memDiff.charAt(0) !== &#x27;-&#x27;) {
        memDiff = &#x27;+&#x27; + memDiff;
    }

    this.command.<span class="apidocCodeKeywordSpan">debug</span>(
&#x27;stack: &#x27;    + this.queue.count + &#x27;, &#x27; +

&#x27;requests: &#x27; + this.requests +
             &#x27; (&#x27; + this.queue.requests + &#x27; queued), &#x27; +

&#x27;RAM: &#x27;      + toMB(mem.rss) + &#x27; (&#x27; + memDiff + &#x27;), &#x27; +
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.delay" id="apidoc.element.osmosis.Command.prototype.delay">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>delay
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">delay = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `click`

 * Added `.click()` for interacting with JS-only content

#### `delay`

 * Added `.<span class="apidocCodeKeywordSpan">delay</span>(n)` for waiting n seconds before calling next. Accepts a decimal value
.

#### `find`

 * Accepts an array of selectors as the first argument

#### `follow`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.do" id="apidoc.element.osmosis.Command.prototype.do">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>do
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">do = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `contains`

 * Added `.contains(string)` to discard nodes whose contents do not match `string`

#### `do`

 * Added `.<span class="apidocCodeKeywordSpan">do</span>()` to call one or more commands using the current context

#### `failure` (or `fail`)

 * Added `.failure(selector)` to discard nodes that match the given selector

#### `filter` (or `success`)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.done" id="apidoc.element.osmosis.Command.prototype.done">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>done
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">done = function () {
    var length   = arguments.length,
        self = this, args, i;

    if (length === 0) {
        // Allow `.config()`, etc. to get configuration
        // options during command chain compile time
        return func.call(self);
    }

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];
    }

    process.nextTick(function () {
        if (self.next !== undefined) {
            // We&#x27;re NOT on the last command, so we call `func` in the
            // context of the PRECEEDING command
            func.apply(self.prev, args);
        } else {
            // We&#x27;re on the last command, so we call `func` in the
            // context of the FIRST command
            func.apply(self.instance.command, args);
        }
    });

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (--self.count === 0) {
    process.nextTick(function () {
        var instance;

        if (self.count === 0) {
            instance = self.instance;
            instance.command.<span class="apidocCodeKeywordSpan">done</span>();

            if (instance.opts.debug === true) {
                instance.resources();
            }
        }
    });
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.end" id="apidoc.element.osmosis.Command.prototype.end">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>end
        <span class="apidocSignatureSpan">(context, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function (context, data) {
    var window, parent;

    // We&#x27;re on the &#x22;sentinel node&#x22;, meaning
    // We&#x27;ve reached the end of the command chain
    if (context !== undefined) {
        if (context.doc === undefined) {
            window = context.window;
        } else if (context.doc().__window !== undefined) {
            window = context.doc().defaultView;
        }

        if (window !== undefined) {
            // close `window` when it reaches the last command
            window.close();
        }

        this.instance.queue.done++;
    }

    if (data !== undefined) {
        parent = data.parent;

        if (parent !== undefined) {
            if (data.isEmpty()) {
                data = data.clone();

                if (context.text !== undefined) {
                    data.setObject(context.text());
                } else if (context.value !== undefined) {
                    data.setObject(context.value());
                }
            }

            parent.merge(data);
            data.unref();
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });

    return;
}

if (callback === undefined)  {
    if (next === undefined) {
        this.<span class="apidocCodeKeywordSpan">end</span>(context, data);
    } else {
        next.start(context, data);
    }

    return;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.error" id="apidoc.element.osmosis.Command.prototype.error">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>error
        <span class="apidocSignatureSpan">(msg, prefixed)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">error = function (msg, prefixed) {
    if (msg instanceof Function) {
        this[name] = msg;
        this.instance.config(name, true);
    } else if (this.next !== undefined) {
        if (prefixed === undefined) {
            this.next[name](&#x27;(&#x27; + this.name + &#x27;) &#x27; + msg, &#x27;&#x27;);
        } else {
            this.next[name](msg, &#x27;&#x27;);
        }
    } else if (this.instance.parent !== undefined) {
        this.instance.parent[name](msg, true);
    }

    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            function (err, res, data) {
                var proxies = opts.proxies;

                self.queue.requests--;

                if ((res === undefined || res.statusCode !== 404) &#x26;&#x26;
proxies !== undefined) {
self.command.<span class="apidocCodeKeywordSpan">error</span>(&#x27;proxy &#x27; + (proxies.index + 1) +
                    &#x27;/&#x27; + proxies.length +
                    &#x27; failed (&#x27; + opts.proxy + &#x27;)&#x27;);

// remove the failing proxy
if (proxies.length &#x3e; 1) {
    opts.proxies.splice(proxies.index, 1);
    opts.proxy = proxies[proxies.index];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.fail" id="apidoc.element.osmosis.Command.prototype.fail">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>fail
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fail = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

module.exports.fail = function (assert) {
var count = 0, errored = false;

osmosis
.parse(html)
.find(&#x22;b&#x22;)
.<span class="apidocCodeKeywordSpan">fail</span>(&#x22;node():contains(&#x27;1&#x27;)&#x22;)
.then(function () {
    count++;
})
.error(function (msg) {
    if (msg.indexOf(&#x27;node():contains&#x27;) &#x3e; -1) {
        errored = true;
    }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.filter" id="apidoc.element.osmosis.Command.prototype.filter">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>filter
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">filter = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `failure` (or `fail`)

* Added `.failure(selector)` to discard nodes that match the given selector

#### `filter` (or `success`)

* Added `.<span class="apidocCodeKeywordSpan">filter</span>(selector)` to discard nodes that do not match the given selector

#### `get`

* Accepts a tokenized URL string
   * @{...} - Request info (url, method, params, headers, etc.)
   * %{...} - `data` object
   * ${...} - `context` search
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.find" id="apidoc.element.osmosis.Command.prototype.find">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>find
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">find = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// libxmljs overrides:

libxml.Document.prototype.findXPath = libxml.Document.prototype.find;
libxml.Element.prototype.findXPath  = libxml.Element.prototype.find;

libxml.Document.prototype.find = function (selector, cache) {
return this.root().<span class="apidocCodeKeywordSpan">find</span>(selector, cache);
};

libxml.Element.prototype.find = function (selector) {
if (selector.charAt(1) === &#x27;/&#x27; ||
    selector.charAt(0) === &#x27;/&#x27; ||
    selector.charAt(0) === &#x27;(&#x27;) {
    return this.findXPath(selector);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.findCommandArg" id="apidoc.element.osmosis.Command.prototype.findCommandArg">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>findCommandArg
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findCommandArg = function (obj) {
    var keys, key, length, i = 0;

    if (obj instanceof Command) {
        obj.instance.setParent(this);
        return obj.instance.command;
    }

    keys    = Object.keys(obj);
    length  = keys.length;

    for (; i &#x3c; length; i++) {
        key = keys[i];
        switch (typeof obj[key]) {
            case &#x27;object&#x27;:
                if (obj[key] !== null) {
                    obj[key] = this.findCommandArg(obj[key]);
                }

                break;
            case &#x27;function&#x27;:
                obj[key] = this.findCommandArg(this.then(obj[key]));
        }
    }

    return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

args = new Array(length);

for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
    args[i] = arguments[i];

    if (typeof args[i] === &#x27;object&#x27;) {
        args[i] = this.<span class="apidocCodeKeywordSpan">findCommandArg</span>(args[i]);
    }
}

self.args = args;

if (func.length === 4) {
    self.cb = func;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.follow" id="apidoc.element.osmosis.Command.prototype.follow">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>follow
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">follow = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
var osmosis = require(&#x27;osmosis&#x27;);

osmosis
.get(&#x27;www.craigslist.org/about/sites&#x27;)
.find(&#x27;h1 + div a&#x27;)
.set(&#x27;location&#x27;)
.<span class="apidocCodeKeywordSpan">follow</span>(&#x27;@href&#x27;)
.find(&#x27;header + div + div li &#x3e; a&#x27;)
.set(&#x27;category&#x27;)
.follow(&#x27;@href&#x27;)
.paginate(&#x27;.totallink + a.button.next:first&#x27;)
.find(&#x27;p &#x3e; a&#x27;)
.follow(&#x27;@href&#x27;)
.set({
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.get" id="apidoc.element.osmosis.Command.prototype.get">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>get
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {object} [params] - GET query parameters
* @returns Command
* @see {@link Command.run}
*
* @example {@lang javascript}
*
* // These instances start immediately
* osmosis.<span class="apidocCodeKeywordSpan">get</span>(&#x27;http://example.com&#x27;);
* osmosis(&#x27;http://example.com&#x27;);
*
* // These instances need started
* instance = new osmosis.get(&#x27;http://example.com&#x27;);
* instance.run();
*
* instance = new osmosis(&#x27;http://example.com&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.getInstance" id="apidoc.element.osmosis.Command.prototype.getInstance">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>getInstance
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getInstance = function () {
    return this.prev.instance;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.getOpts" id="apidoc.element.osmosis.Command.prototype.getOpts">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>getOpts
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getOpts = function () {
    var proto;

    if (this.opts !== undefined) {
        return this.opts;
    }

    if (this.prev !== undefined) {
        proto = this.prev.getOpts();
    } else if (this.instance !== undefined) {
        proto = this.instance.opts;
    }

    this.opts = Object.create(proto);

    return this.opts;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var proto;

if (this.opts !== undefined) {
    return this.opts;
}

if (this.prev !== undefined) {
    proto = this.prev.<span class="apidocCodeKeywordSpan">getOpts</span>();
} else if (this.instance !== undefined) {
    proto = this.instance.opts;
}

this.opts = Object.create(proto);

return this.opts;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.header" id="apidoc.element.osmosis.Command.prototype.header">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>header
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">header = function () {
    var length   = arguments.length,
        self = this, args, i;

    if (length === 0) {
        // Allow `.config()`, etc. to get configuration
        // options during command chain compile time
        return func.call(self);
    }

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];
    }

    process.nextTick(function () {
        if (self.next !== undefined) {
            // We&#x27;re NOT on the last command, so we call `func` in the
            // context of the PRECEEDING command
            func.apply(self.prev, args);
        } else {
            // We&#x27;re on the last command, so we call `func` in the
            // context of the FIRST command
            func.apply(self.instance.command, args);
        }
    });

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

module.exports.headers = function (assert) {
    var calledThen = false;

    osmosis
    .get(url + &#x27;/headers&#x27;)
    .<span class="apidocCodeKeywordSpan">header</span>(&#x27;one&#x27;, 1)
    .headers({ &#x27;test&#x27;: true })
    .then(function (context) {
var opts = this.getOpts();

calledThen = true;

assert.equal(opts.headers.one, 1);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.headers" id="apidoc.element.osmosis.Command.prototype.headers">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>headers
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">headers = function () {
    var length   = arguments.length,
        self = this, args, i;

    if (length === 0) {
        // Allow `.config()`, etc. to get configuration
        // options during command chain compile time
        return func.call(self);
    }

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];
    }

    process.nextTick(function () {
        if (self.next !== undefined) {
            // We&#x27;re NOT on the last command, so we call `func` in the
            // context of the PRECEEDING command
            func.apply(self.prev, args);
        } else {
            // We&#x27;re on the last command, so we call `func` in the
            // context of the FIRST command
            func.apply(self.instance.command, args);
        }
    });

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

module.exports.headers = function (assert) {
    var calledThen = false;

    osmosis
    .get(url + &#x27;/headers&#x27;)
    .header(&#x27;one&#x27;, 1)
    .<span class="apidocCodeKeywordSpan">headers</span>({ &#x27;test&#x27;: true })
    .then(function (context) {
var opts = this.getOpts();

calledThen = true;

assert.equal(opts.headers.one, 1);
assert.equal(opts.headers.test, true);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.if" id="apidoc.element.osmosis.Command.prototype.if">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>if
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">if = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.inherit" id="apidoc.element.osmosis.Command.prototype.inherit">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>inherit
        <span class="apidocSignatureSpan">(command)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inherit = function (command) {
    command.instance = this.instance;

    return command;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.learn" id="apidoc.element.osmosis.Command.prototype.learn">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>learn
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">learn = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



# Changelog

#### TODO:

* Add `.<span class="apidocCodeKeywordSpan">learn</span>()` to generate a selector for a selected node
* Add `.listen()` for easily creating DOM event listeners
* Add `.trigger()` for easily triggering DOM events
* Add `.on()` for binding callback to a local-only event
* Add `.url()` to set the current URL
* Add `.params()` to set the current URL parameters
* Add `.save()` to save response data to a file
* Add `.add()`, `.remove()` for node creation/deletion?
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.log" id="apidoc.element.osmosis.Command.prototype.log">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>log
        <span class="apidocSignatureSpan">(msg, prefixed)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">log = function (msg, prefixed) {
    if (msg instanceof Function) {
        this[name] = msg;
        this.instance.config(name, true);
    } else if (this.next !== undefined) {
        if (prefixed === undefined) {
            this.next[name](&#x27;(&#x27; + this.name + &#x27;) &#x27; + msg, &#x27;&#x27;);
        } else {
            this.next[name](msg, &#x27;&#x27;);
        }
    } else if (this.instance.parent !== undefined) {
        this.instance.parent[name](msg, true);
    }

    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
               }

               self.dequeueRequest();
               self.queue.pop();
           })
           .on(&#x27;redirect&#x27;, function (new_url) {
               if (self.opts.log === true) {
                   self.command.<span class="apidocCodeKeywordSpan">log</span>(&#x27;[redirect] &#x27; +
                                    href + &#x27; -&#x3e; &#x27; + new_url);
               }
           });
};

/**
* Add a request to the queue.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.login" id="apidoc.element.osmosis.Command.prototype.login">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>login
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">login = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
pass = &#x27;pass&#x27;;

module.exports.form = function (assert) {
var errors = 0;

osmosis
.get(url + &#x27;/form&#x27;)
.<span class="apidocCodeKeywordSpan">login</span>(user, pass)
.success(&#x27;div:contains(&#x22;authenticated&#x22;)&#x27;)
.then(function (context) {
    assert.equal(context.get(&#x27;div&#x27;).text(), &#x27;authenticated&#x27;);
})
.follow(&#x27;a&#x27;)
.then(function (context) {
    var div = context.get(&#x27;div&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.match" id="apidoc.element.osmosis.Command.prototype.match">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>match
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">match = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `headers` (or `header`)

* Added `headers({ key: value })` and `header(key, value)` to set HTTP headers

#### `match`

 * Added `.<span class="apidocCodeKeywordSpan">match</span>([selector], RegExp)` to discard nodes whose contents do not match

#### `rewrite`

 * Added `.rewrite(callback)` to set a URL rewriting function for the preceding request

### Internal changes:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.paginate" id="apidoc.element.osmosis.Command.prototype.paginate">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>paginate
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">paginate = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.get(&#x27;www.craigslist.org/about/sites&#x27;)
.find(&#x27;h1 + div a&#x27;)
.set(&#x27;location&#x27;)
.follow(&#x27;@href&#x27;)
.find(&#x27;header + div + div li &#x3e; a&#x27;)
.set(&#x27;category&#x27;)
.follow(&#x27;@href&#x27;)
.<span class="apidocCodeKeywordSpan">paginate</span>(&#x27;.totallink + a.button.next:first&#x27;)
.find(&#x27;p &#x3e; a&#x27;)
.follow(&#x27;@href&#x27;)
.set({
&#x27;title&#x27;:        &#x27;section &#x3e; h2&#x27;,
&#x27;description&#x27;:  &#x27;#postingbody&#x27;,
&#x27;subcategory&#x27;:  &#x27;div.breadbox &#x3e; span[4]&#x27;,
&#x27;date&#x27;:         &#x27;time@datetime&#x27;,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.parse" id="apidoc.element.osmosis.Command.prototype.parse">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>parse
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (length === 3) {
        opts.parse = false;
    }

    if (context !== undefined) {
        document = context.doc();

        url = URL.<span class="apidocCodeKeywordSpan">parse</span>(document.location.resolve(href), true);

        if (opts.follow_set_referer !== false) {
if (opts.headers === undefined) {
    opts.headers = {};
}

opts.headers.referer = document.location.href;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.pause" id="apidoc.element.osmosis.Command.prototype.pause">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>pause
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pause = function () {
    var length   = arguments.length,
        self = this, args, i;

    if (length === 0) {
        // Allow `.config()`, etc. to get configuration
        // options during command chain compile time
        return func.call(self);
    }

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];
    }

    process.nextTick(function () {
        if (self.next !== undefined) {
            // We&#x27;re NOT on the last command, so we call `func` in the
            // context of the PRECEEDING command
            func.apply(self.prev, args);
        } else {
            // We&#x27;re on the last command, so we call `func` in the
            // context of the FIRST command
            func.apply(self.instance.command, args);
        }
    });

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    instance.run();

    setTimeout(function () {
        paused = true;
        assert.ok(count &#x3e; 0);
        assert.ok(count &#x3c; pages);
        instance.<span class="apidocCodeKeywordSpan">pause</span>();

        setTimeout(function () {
            paused = false;
            instance.resume();
        }, 300);
    }, 300);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.post" id="apidoc.element.osmosis.Command.prototype.post">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>post
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">post = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    osmosis(url + &#x27;/headers&#x27;)
.then(function (context) {
    assert.ok(context.querySelector(&#x27;cookie&#x27;));
    assert.equal(context.querySelector(&#x27;cookie&#x27;).textContent,
                &#x27;gc1=set&#x27;);
})
.<span class="apidocCodeKeywordSpan">post</span>(url + &#x27;/headers&#x27;)
.cookie(&#x27;c1&#x27;, &#x27;yes&#x27;)
.then(function (context) {
    assert.ok(context.querySelector(&#x27;cookie&#x27;));
    assert.equal(context.querySelector(&#x27;cookie&#x27;).textContent,
                &#x27;gc1=set; c1=yes&#x27;);
})
.done(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.proxy" id="apidoc.element.osmosis.Command.prototype.proxy">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>proxy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">proxy = function () {
    var length   = arguments.length,
        self = this, args, i;

    if (length === 0) {
        // Allow `.config()`, etc. to get configuration
        // options during command chain compile time
        return func.call(self);
    }

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];
    }

    process.nextTick(function () {
        if (self.next !== undefined) {
            // We&#x27;re NOT on the last command, so we call `func` in the
            // context of the PRECEEDING command
            func.apply(self.prev, args);
        } else {
            // We&#x27;re on the last command, so we call `func` in the
            // context of the FIRST command
            func.apply(self.instance.command, args);
        }
    });

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

## 0.1.1

* `proxy` option can now be an array of multiple proxies

#### `proxy`

* Added `.<span class="apidocCodeKeywordSpan">proxy</span>()` to easily set the `proxy` configuration option

#### `then`

* If the first argument&#x27;s name is:
   * &#x22;document&#x22; - The callback is given the current document
   * &#x22;window&#x22; - The callback is given the Window object
   * &#x22;$&#x22; - The callback is given a jQuery object (if available)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.request" id="apidoc.element.osmosis.Command.prototype.request">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>request
        <span class="apidocSignatureSpan">(method, context, href, params, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">request = function (method, context, href, params, callback) {
    var self     = this,
        length   = callback.length,
        instance = self.instance,
        opts     = Object.create(this.getOpts()),
        url, document, key, proxies;

    if (!href || href.length === 0) {
        callback(&#x22;Invalid URL&#x22;);
        return;
    }

    if (length === 3) {
        opts.parse = false;
    }

    if (context !== undefined) {
        document = context.doc();

        url = URL.parse(document.location.resolve(href), true);

        if (opts.follow_set_referer !== false) {
            if (opts.headers === undefined) {
                opts.headers = {};
            }

            opts.headers.referer = document.location.href;
        }

        if (opts.cookies !== undefined) {
            if (document.cookies === undefined) {
                document.cookies = {};
            }

            opts.cookies = extend(document.cookies, opts.cookies);
        } else {
            opts.cookies = document.cookies;
        }

        if (method === &#x27;post&#x27;) {
            // Check the enctype if submitting a form
            if (formFunctions.isMultipart(context)) {
                opts.multipart = true;
            }
        }
    } else if (href.substr(0, 1) === &#x27;//&#x27;) {
        url = URL.parse(&#x27;http:&#x27; + href, true);
    } else if (href.substr(0, 4) !== &#x27;http&#x27;) {
        url = URL.parse(&#x27;http://&#x27; + href, true);
    } else {
        url = URL.parse(href, true);
    }

    url.method = method;
    url.params = params;

    if (method === &#x27;get&#x27;) {
        for (key in params) {
            url.query[key] = params[key];
        }

        url.params = url.query;
        url.search = qs.stringify(url.query);
        url.href   = URL.format(url);
    }

    if (Array.isArray(opts.proxy)) {
        opts.proxies = opts.proxy;
    }

    if (opts.proxies !== undefined) {
        proxies = opts.proxies;

        if (proxies.index === undefined || ++proxies.index &#x3e;= proxies.length) {
            proxies.index = 0;
        }

        opts.proxy = proxies[proxies.index];
    }

    instance.queueRequest(url, opts,
    function (err, res, document) {
        if (err !== null) {
            self.error((self.name !== method ?
                        &#x27;[&#x27; + method + &#x27;] &#x27; :
                        &#x27;&#x27;) + (url.href) + &#x27; - &#x27; + err);

            if (length === 2) {
                callback(err, document);
            } else if (length === 3) {
                callback(err, res, document);
            }
        } else {
            self.log(&#x27;loaded [&#x27; + method + &#x27;] &#x27; + url.href + &#x27; &#x27; +
                (params ?
                JSON.stringify(params) :
                &#x27;&#x27;) +
                (opts.proxy ?
                &#x27; via &#x27; + opts.proxy :
                &#x27;&#x27;)
            );

            if (length === 1) {
                callback(document);
            } else if (length === 2) {
                callback(null, document);
            } else {
                callback(null, res, document);
            }
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
                                       callback,
                                       tries) {
if (tries === undefined) {
    tries = 0;
}

if (this.queue.requests &#x3c; this.opts.concurrency) {
    this.<span class="apidocCodeKeywordSpan">request</span>(url, opts, callback, tries);
} else {
    this.queue.enqueue([url, opts, callback, tries]);
}
};

Osmosis.prototype.dequeueRequest = function () {
var arr, length = this.queue.length;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.resume" id="apidoc.element.osmosis.Command.prototype.resume">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>resume
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resume = function () {
    var length   = arguments.length,
        self = this, args, i;

    if (length === 0) {
        // Allow `.config()`, etc. to get configuration
        // options during command chain compile time
        return func.call(self);
    }

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];
    }

    process.nextTick(function () {
        if (self.next !== undefined) {
            // We&#x27;re NOT on the last command, so we call `func` in the
            // context of the PRECEEDING command
            func.apply(self.prev, args);
        } else {
            // We&#x27;re on the last command, so we call `func` in the
            // context of the FIRST command
            func.apply(self.instance.command, args);
        }
    });

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

if (instance.stopped === true) {
    return;
}

if (instance.paused  === true) {
    instance.<span class="apidocCodeKeywordSpan">resume</span>(function () {
        self.start(context, data);
    });

    return;
}

if (callback === undefined)  {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.rewrite" id="apidoc.element.osmosis.Command.prototype.rewrite">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>rewrite
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">rewrite = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `match`

 * Added `.match([selector], RegExp)` to discard nodes whose contents do not match

#### `rewrite`

 * Added `.<span class="apidocCodeKeywordSpan">rewrite</span>(callback)` to set a URL rewriting function for the preceding request

### Internal changes:

 * `promise.args` is now an object (used to be an array)
 * HTTP 400 errors are now logged and the requests are retried.

## 0.0.9
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.run" id="apidoc.element.osmosis.Command.prototype.run">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>run
        <span class="apidocSignatureSpan">(context, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">run = function (context, data) {
    return this.instance.run(context, data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *
 * // These instances start immediately
 * osmosis.get(&#x27;http://example.com&#x27;);
 * osmosis(&#x27;http://example.com&#x27;);
 *
 * // These instances need started
 * instance = new osmosis.get(&#x27;http://example.com&#x27;);
 * instance.<span class="apidocCodeKeywordSpan">run</span>();
 *
 * instance = new osmosis(&#x27;http://example.com&#x27;);
 * instance.run();
 */

function Osmosis(url, params) {
if (url !== undefined) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.select" id="apidoc.element.osmosis.Command.prototype.select">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>select
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">select = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

module.exports.select = function (assert) {
var count = 0;

osmosis.get(url + &#x27;/find&#x27;)
.find(&#x27;ul:last &#x3e; li:last&#x27;)
.<span class="apidocCodeKeywordSpan">select</span>(&#x27;b&#x27;)
.then(function () {
    count++;
})
.done(function () {
    assert.equal(count, 2);
    assert.done();
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.set" id="apidoc.element.osmosis.Command.prototype.set">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>set
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* Replaces previously set values

### Internal changes:

* Enhanced stack counting
* Added data object ref counting
* Added domain specific cookie handling
* Improved stability of deep instance nesting with `.<span class="apidocCodeKeywordSpan">set</span>()`
* Osmosis instances operate more independently
* Request queues are now a single array for each instance
* Promises must accept and call `done` if they asynchronously
  send more than one output context per input context
* If `.then` sends more than one output context per input context,
  then it must accept `done()` as its last argument and
  call it after calling `next()` for the last time.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.setInstance" id="apidoc.element.osmosis.Command.prototype.setInstance">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>setInstance
        <span class="apidocSignatureSpan">(val)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setInstance = function (val) {
    return (this.prev.instance = val);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.setOpt" id="apidoc.element.osmosis.Command.prototype.setOpt">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>setOpt
        <span class="apidocSignatureSpan">(name, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setOpt = function (name, value) {
    var opts = this.getOpts();

    if (value !== null &#x26;&#x26;
        value instanceof Object &#x26;&#x26;
        opts[name] !== null &#x26;&#x26;
        opts[name] instanceof Object) {
        opts[name] = extend(value, opts[name]);
    } else {
        opts[name] = value;
    }

    return opts;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var opts = this.getOpts(), headers;

    if (opts.hasOwnProperty(&#x27;headers&#x27;)) {
        opts.headers[name] = value;
    } else {
        headers = {};
        headers[name] = value;
        this.<span class="apidocCodeKeywordSpan">setOpt</span>(&#x27;headers&#x27;, headers);
    }

    return this;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.start" id="apidoc.element.osmosis.Command.prototype.start">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>start
        <span class="apidocSignatureSpan">(context, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (context, data) {
    var self        = this,
        next        = this.next,
        instance    = this.instance,
        callback    = this.cb,
        calledNext  = false,
        window;

    if (context === null) {
        return;
    }

    if (instance.stopped === true) {
        return;
    }

    if (instance.paused  === true) {
        instance.resume(function () {
            self.start(context, data);
        });

        return;
    }

    if (callback === undefined)  {
        if (next === undefined) {
            this.end(context, data);
        } else {
            next.start(context, data);
        }

        return;
    }

    instance.queue.push();

    if (data === undefined) {
        data = (new Data());
    }

    data.ref();

    return callback.call(this, context, data, function (c, d) {
        if (calledNext === true) {
            // If `next` is called more than once,
            // then we need to clone the data
            next.start(c, d.clone().ref());
        } else {
            calledNext = true;
            next.start(c, d);
        }
    }, function (err) {
        data.unref();

        if (calledNext !== true) {
            self.end(context, data);
        }

        if (err !== undefined) {
            self.error(err);
        }

        instance.queue.pop();
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @see {@link Command.run}
*/
Osmosis.prototype.run = function () {
   var self = this;

   process.nextTick(function () {
       self.started  = true;
       self.command.<span class="apidocCodeKeywordSpan">start</span>();
   });
};

/**
* Make an HTTP request.
*
* @private
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.stop" id="apidoc.element.osmosis.Command.prototype.stop">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>stop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stop = function () {
    var length   = arguments.length,
        self = this, args, i;

    if (length === 0) {
        // Allow `.config()`, etc. to get configuration
        // options during command chain compile time
        return func.call(self);
    }

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];
    }

    process.nextTick(function () {
        if (self.next !== undefined) {
            // We&#x27;re NOT on the last command, so we call `func` in the
            // context of the PRECEEDING command
            func.apply(self.prev, args);
        } else {
            // We&#x27;re on the last command, so we call `func` in the
            // context of the FIRST command
            func.apply(self.instance.command, args);
        }
    });

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
osmosis.get(url + &#x27;/delay-response&#x27;)
.follow(&#x27;a&#x27;)
.follow(&#x27;a&#x27;)
.follow(&#x27;a&#x27;)
.log(function (msg) {
    if (msg.indexOf(&#x27;loaded&#x27;) &#x3e; -1) {
        if (++count === 2) {
            instance.<span class="apidocCodeKeywordSpan">stop</span>();
        }
    }
})
.then(function () {
    error = true;
})
.done(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.submit" id="apidoc.element.osmosis.Command.prototype.submit">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>submit
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">submit = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *       Add input[name] case-insensitivity tests
 */

module.exports.form1 = function (assert) {
var calledThen = false;

osmosis.get(url + &#x27;/submit-form&#x27;)
.<span class="apidocCodeKeywordSpan">submit</span>(&#x27;form&#x27;)
.then(function (context) {
    calledThen = true;
    assert.deepEqual(JSON.parse(context.get(&#x27;#data&#x27;).text()), getInputs(1, &#x27;sub1&#x27;));
})
.done(function () {
    assert.ok(calledThen);
    assert.done();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.success" id="apidoc.element.osmosis.Command.prototype.success">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>success
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">success = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

module.exports.form = function (assert) {
var errors = 0;

osmosis
.get(url + &#x27;/form&#x27;)
.login(user, pass)
.<span class="apidocCodeKeywordSpan">success</span>(&#x27;div:contains(&#x22;authenticated&#x22;)&#x27;)
.then(function (context) {
    assert.equal(context.get(&#x27;div&#x27;).text(), &#x27;authenticated&#x27;);
})
.follow(&#x27;a&#x27;)
.then(function (context) {
    var div = context.get(&#x27;div&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.then" id="apidoc.element.osmosis.Command.prototype.then">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>then
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">then = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            case &#x27;object&#x27;:
                if (obj[key] !== null) {
                    obj[key] = this.findCommandArg(obj[key]);
                }

                break;
            case &#x27;function&#x27;:
                obj[key] = this.findCommandArg(this.<span class="apidocCodeKeywordSpan">then</span>(obj[key]));
        }
    }

    return obj;
};

fs.readdirSync(cmdDir).forEach(function (file) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.train" id="apidoc.element.osmosis.Command.prototype.train">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>train
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">train = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.trigger" id="apidoc.element.osmosis.Command.prototype.trigger">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>trigger
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trigger = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

# Changelog

#### TODO:

* Add `.learn()` to generate a selector for a selected node
* Add `.listen()` for easily creating DOM event listeners
* Add `.<span class="apidocCodeKeywordSpan">trigger</span>()` for easily triggering DOM events
* Add `.on()` for binding callback to a local-only event
* Add `.url()` to set the current URL
* Add `.params()` to set the current URL parameters
* Add `.save()` to save response data to a file
* Add `.add()`, `.remove()` for node creation/deletion?
* Add `.scroll()` to scrape infinite scroll pages
* Add warnings for parser errors?
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.use" id="apidoc.element.osmosis.Command.prototype.use">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>use
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">use = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Command.prototype.using" id="apidoc.element.osmosis.Command.prototype.using">
        function <span class="apidocSignatureSpan">osmosis.Command.prototype.</span>using
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">using = function () {
    var length   = arguments.length,
        self, i, args;

    if (this.name === undefined) {
        self = this;
    } else {
        self = new Command(this);
    }

    self.name = name;

    args = new Array(length);

    for (i = 0; i &#x3c; length &#x26;&#x26; arguments[i] !== undefined; i++) {
        args[i] = arguments[i];

        if (typeof args[i] === &#x27;object&#x27;) {
            args[i] = this.findCommandArg(args[i]);
        }
    }

    self.args = args;

    if (func.length === 4) {
        self.cb = func;
    } else {
        self.cb = func.apply(self, self.args);
    }

    self.next = new Command(self);

    return self.next;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.Data" id="apidoc.module.osmosis.Data">module osmosis.Data</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.Data.Data" id="apidoc.element.osmosis.Data.Data">
        function <span class="apidocSignatureSpan">osmosis.</span>Data
        <span class="apidocSignatureSpan">(parent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Data(parent) {
    this.stack = { count: 0 };

    if (parent) {
        this.parent = parent;
    }

    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.Data.prototype" id="apidoc.module.osmosis.Data.prototype">module osmosis.Data.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.child" id="apidoc.element.osmosis.Data.prototype.child">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>child
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">child = function () {
    return new Data(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

module.exports.Data = function (assert) {
var Data = require(&#x27;../lib/Data.js&#x27;),
    parent, child;

// Data root can be an array
parent = (new Data()).isArray(true);
child = parent.<span class="apidocCodeKeywordSpan">child</span>().set(&#x27;key&#x27;, &#x27;value&#x27;);
parent.merge(child);
assert.deepEqual(parent.getObject(), [{ key: &#x27;value&#x27; }]);

parent   = (new Data()).isArray(true);

// Child objects are pushed to an array
parent.merge(parent.child().set(&#x27;key&#x27;, &#x27;value&#x27;));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.clone" id="apidoc.element.osmosis.Data.prototype.clone">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>clone
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clone = function () {
    var clone    = this.next();

    clone.object = this.copy();

    return clone;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

data.ref();

return callback.call(this, context, data, function (c, d) {
    if (calledNext === true) {
        // If `next` is called more than once,
        // then we need to clone the data
        next.start(c, d.<span class="apidocCodeKeywordSpan">clone</span>().ref());
    } else {
        calledNext = true;
        next.start(c, d);
    }
}, function (err) {
    data.unref();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.copy" id="apidoc.element.osmosis.Data.prototype.copy">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>copy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">copy = function () {
    var obj = this.object,
        data, i, keys, key;

    if (this.isArray()) {
        data = obj.slice(0);
    } else if (obj instanceof Object) {
        data = {};

        for (i = 0, keys = Object.keys(obj); i &#x3c; keys.length; i++) {
            key = keys[i];
            data[key] = obj[key];
        }
    } else {
        data = obj;
    }

    return data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* Clone a Data object.
*
*/

Data.prototype.clone = function () {
   var clone    = this.next();

   clone.object = this.<span class="apidocCodeKeywordSpan">copy</span>();

   return clone;
};

/**
* Call callback when `Data.stack.count` === 0.
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.done" id="apidoc.element.osmosis.Data.prototype.done">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>done
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">done = function (cb) {
    this.stack.done = cb;
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (--self.count === 0) {
    process.nextTick(function () {
        var instance;

        if (self.count === 0) {
            instance = self.instance;
            instance.command.<span class="apidocCodeKeywordSpan">done</span>();

            if (instance.opts.debug === true) {
                instance.resources();
            }
        }
    });
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.extend" id="apidoc.element.osmosis.Data.prototype.extend">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>extend
        <span class="apidocSignatureSpan">(object)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (object) {
    var key, keys = Object.keys(object),
        isArray = this.isArray(),
        i = keys.length;

    while (i--) {
        key = keys[i];

        if (isArray) {
            this.push(object[key]);
        } else {
            this.set(key, object[key]);
        }
    }

    return object;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

if (this.isArray() === true) {
    this.push(object);
} else if (index !== undefined) {
    this.set(child.getIndex(), object);
} else if (object instanceof Object) {
    this.<span class="apidocCodeKeywordSpan">extend</span>(object);
}
};

Data.prototype.toArray = function () {
var object = this.object;

if (object instanceof Array) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.getIndex" id="apidoc.element.osmosis.Data.prototype.getIndex">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>getIndex
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getIndex = function () {
    return this._index;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Create a new Data object to pass to the next Command.
 *
 */

Data.prototype.next = function () {
    var clone = new Data(this.parent)
                    .setIndex(this.<span class="apidocCodeKeywordSpan">getIndex</span>())
                    .isArray(this.isArray());

    clone.stack  = this.stack;
    clone.object = this.object;
    return clone;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.getObject" id="apidoc.element.osmosis.Data.prototype.getObject">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>getObject
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getObject = function () {
    if (this.object === undefined) {
        if (this.isArray() === true) {
            this.toArray();
        } else {
            this.setObject({});
        }
    }

    return this.object;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return this;
}

if (this.isArray() === true) {
    return this.push(val);
}

object     = this.<span class="apidocCodeKeywordSpan">getObject</span>();
currentVal = object[key];

if (currentVal !== undefined) {
    // If the key being set already has a value,
    // then convert it to an Array.
    if (currentVal instanceof Array) {
        currentVal.push(val);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.isArray" id="apidoc.element.osmosis.Data.prototype.isArray">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>isArray
        <span class="apidocSignatureSpan">(val)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isArray = function (val) {
    if (val !== undefined) {
        this._isArray = val === true;
        return this;
    }

    return (this._isArray === true || this.object instanceof Array);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

url.params = url.query;
url.search = qs.stringify(url.query);
url.href   = URL.format(url);
    }

    if (Array.<span class="apidocCodeKeywordSpan">isArray</span>(opts.proxy)) {
opts.proxies = opts.proxy;
    }

    if (opts.proxies !== undefined) {
proxies = opts.proxies;

if (proxies.index === undefined || ++proxies.index &#x3e;= proxies.length) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.isEmpty" id="apidoc.element.osmosis.Data.prototype.isEmpty">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>isEmpty
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isEmpty = function () {
    return (this.object === undefined ||
            (this.object instanceof Object &#x26;&#x26;
             Object.keys(this.object).length === 0)
            );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        this.instance.queue.done++;
    }

    if (data !== undefined) {
        parent = data.parent;

        if (parent !== undefined) {
            if (data.<span class="apidocCodeKeywordSpan">isEmpty</span>()) {
data = data.clone();

if (context.text !== undefined) {
    data.setObject(context.text());
} else if (context.value !== undefined) {
    data.setObject(context.value());
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.merge" id="apidoc.element.osmosis.Data.prototype.merge">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>merge
        <span class="apidocSignatureSpan">(child)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">merge = function (child) {
    var object = child.object,
        index  = child.getIndex();

    if (object === undefined) {
        return;
    }

    if (this.isArray() === true) {
        this.push(object);
    } else if (index !== undefined) {
        this.set(child.getIndex(), object);
    } else if (object instanceof Object) {
        this.extend(object);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
               if (context.text !== undefined) {
                   data.setObject(context.text());
               } else if (context.value !== undefined) {
                   data.setObject(context.value());
               }
           }

           parent.<span class="apidocCodeKeywordSpan">merge</span>(data);
           data.unref();
       }
   }
};

/**
* Get the current options and inherit previous options.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.next" id="apidoc.element.osmosis.Data.prototype.next">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>next
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">next = function () {
    var clone = new Data(this.parent)
                    .setIndex(this.getIndex())
                    .isArray(this.isArray());

    clone.stack  = this.stack;
    clone.object = this.object;
    return clone;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Clone a Data object.
 *
 */

Data.prototype.clone = function () {
    var clone    = this.<span class="apidocCodeKeywordSpan">next</span>();

    clone.object = this.copy();

    return clone;
};

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.push" id="apidoc.element.osmosis.Data.prototype.push">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>push
        <span class="apidocSignatureSpan">(val)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">push = function (val) {
    var object = this.toArray();

    if (val === undefined) {
        return this;
    }

    object.push(val);

    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var self = this,
    href   = url.href,
    method = url.method,
    params = url.params;

this.requests++;
this.queue.requests++;
this.queue.<span class="apidocCodeKeywordSpan">push</span>();

request(url.method,
        url,
        url.params,
        opts,
        tries,
        function (err, res, data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.ref" id="apidoc.element.osmosis.Data.prototype.ref">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>ref
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ref = function () {
    this.stack.count++;
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

instance.queue.push();

if (data === undefined) {
    data = (new Data());
}

data.<span class="apidocCodeKeywordSpan">ref</span>();

return callback.call(this, context, data, function (c, d) {
    if (calledNext === true) {
        // If `next` is called more than once,
        // then we need to clone the data
        next.start(c, d.clone().ref());
    } else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.set" id="apidoc.element.osmosis.Data.prototype.set">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>set
        <span class="apidocSignatureSpan">(key, val)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set = function (key, val) {
    var object, currentVal;

    if (val === undefined) {
        return this;
    }

    if (this.isArray() === true) {
        return this.push(val);
    }

    object     = this.getObject();
    currentVal = object[key];

    if (currentVal !== undefined) {
        // If the key being set already has a value,
        // then convert it to an Array.
        if (currentVal instanceof Array) {
            currentVal.push(val);
        } else {
            object[key] = [currentVal, val];
        }
    } else {
        object[key] = val;
    }

    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* Replaces previously set values

### Internal changes:

* Enhanced stack counting
* Added data object ref counting
* Added domain specific cookie handling
* Improved stability of deep instance nesting with `.<span class="apidocCodeKeywordSpan">set</span>()`
* Osmosis instances operate more independently
* Request queues are now a single array for each instance
* Promises must accept and call `done` if they asynchronously
  send more than one output context per input context
* If `.then` sends more than one output context per input context,
  then it must accept `done()` as its last argument and
  call it after calling `next()` for the last time.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.setIndex" id="apidoc.element.osmosis.Data.prototype.setIndex">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>setIndex
        <span class="apidocSignatureSpan">(index)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setIndex = function (index) {
    if (this.isArray() !== true) {
        this._index = index;
    }

    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Create a new Data object to pass to the next Command.
 *
 */

Data.prototype.next = function () {
    var clone = new Data(this.parent)
                    .<span class="apidocCodeKeywordSpan">setIndex</span>(this.getIndex())
                    .isArray(this.isArray());

    clone.stack  = this.stack;
    clone.object = this.object;
    return clone;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.setObject" id="apidoc.element.osmosis.Data.prototype.setObject">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>setObject
        <span class="apidocSignatureSpan">(object)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setObject = function (object) {
    this.object = object;

    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        parent = data.parent;

        if (parent !== undefined) {
if (data.isEmpty()) {
    data = data.clone();

    if (context.text !== undefined) {
        data.<span class="apidocCodeKeywordSpan">setObject</span>(context.text());
    } else if (context.value !== undefined) {
        data.setObject(context.value());
    }
}

parent.merge(data);
data.unref();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.toArray" id="apidoc.element.osmosis.Data.prototype.toArray">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>toArray
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toArray = function () {
    var object = this.object;

    if (object instanceof Array) {
        return object;
    }

    if (this.isEmpty()) {
        this.setObject([]);
    } else {
        this.setObject([ object ]);
    }

    return this.getObject();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Get the raw data object.
 *
 */

Data.prototype.getObject = function () {
    if (this.object === undefined) {
        if (this.isArray() === true) {
            this.<span class="apidocCodeKeywordSpan">toArray</span>();
        } else {
            this.setObject({});
        }
    }

    return this.object;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Data.prototype.unref" id="apidoc.element.osmosis.Data.prototype.unref">
        function <span class="apidocSignatureSpan">osmosis.Data.prototype.</span>unref
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unref = function () {
    if (--this.stack.count === 0) {
        if (this.stack.done !== undefined) {
            this.stack.done.call(this);
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // then we need to clone the data
    next.start(c, d.clone().ref());
} else {
    calledNext = true;
    next.start(c, d);
}
    }, function (err) {
data.<span class="apidocCodeKeywordSpan">unref</span>();

if (calledNext !== true) {
    self.end(context, data);
}

if (err !== undefined) {
    self.error(err);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.Form" id="apidoc.module.osmosis.Form">module osmosis.Form</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.Form.getAction" id="apidoc.element.osmosis.Form.getAction">
        function <span class="apidocSignatureSpan">osmosis.Form.</span>getAction
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getAction = function (node) {
    var document = node.doc();

    if (node.hasAttribute(&#x27;action&#x27;)) {
        return document.location.resolve(node.getAttribute(&#x27;action&#x27;));
    } else if (node.hasAttribute(&#x27;formaction&#x27;)) {
        return document.location.resolve(node.getAttribute(&#x27;formaction&#x27;));
    } else {
        return document.location.href;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return;
}

params = form.getParams(loginForm);
params[userInput.getAttribute(&#x27;name&#x27;)] = user;
params[passInput.getAttribute(&#x27;name&#x27;)] = pass;

url = form.<span class="apidocCodeKeywordSpan">getAction</span>(loginForm);
method = form.getMethod(loginForm);

this.debug(method + &#x27; &#x27; + url + &#x27; &#x27; + JSON.stringify(params));

this.request(method,
             loginForm,
             url,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Form.getEnctype" id="apidoc.element.osmosis.Form.getEnctype">
        function <span class="apidocSignatureSpan">osmosis.Form.</span>getEnctype
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getEnctype = function (node) {
    if (node.hasAttribute(&#x27;enctype&#x27;)) {
        return node.getAttribute(&#x27;enctype&#x27;);
    } else if (node.hasAttribute(&#x27;formenctype&#x27;)) {
        return node.getAttribute(&#x27;formenctype&#x27;);
    }

    return &#x27;application/x-www-form-urlencoded&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

form.isMultipart = function (node) {
if (node.hasAttribute === undefined) {
    return false;
}

return (form.<span class="apidocCodeKeywordSpan">getEnctype</span>(node).substr(0, 5) === &#x27;multi&#x27;);
};

form.getMethod = function (node) {
if (node.hasAttribute(&#x27;method&#x27;)) {
    return node.getAttribute(&#x27;method&#x27;).toLowerCase();
} else if (node.hasAttribute(&#x27;formmethod&#x27;)) {
    return node.getAttribute(&#x27;formmethod&#x27;).toLowerCase();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Form.getForm" id="apidoc.element.osmosis.Form.getForm">
        function <span class="apidocSignatureSpan">osmosis.Form.</span>getForm
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getForm = function (node) {
    if (form.isForm(node)) {
        return node;
    } else if (node.hasAttribute(&#x27;form&#x27;)) {
        return node.doc().getElementById(node.getAttribute(&#x27;form&#x27;));
    } else {
        return node.get(&#x27;ancestor-or-self::form&#x27;);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return node.doc().getElementById(node.getAttribute(&#x27;form&#x27;));
} else {
    return node.get(&#x27;ancestor-or-self::form&#x27;);
}
};

form.getInputs = function (node) {
return form.<span class="apidocCodeKeywordSpan">getForm</span>(node).find(&#x27;[@name &#x27; +
                        &#x27;and not(@disabled) &#x27; +
                        &#x27;and not(@type=&#x22;submit&#x22;)]&#x27;);
};

form.getSubmitButton = function (node) {
if (form.isForm(node)) {
    return node.get(&#x27;[@type=&#x22;submit&#x22; and not(@disabled) and &#x27; +
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Form.getInputs" id="apidoc.element.osmosis.Form.getInputs">
        function <span class="apidocSignatureSpan">osmosis.Form.</span>getInputs
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getInputs = function (node) {
    return form.getForm(node).find(&#x27;[@name &#x27; +
                            &#x27;and not(@disabled) &#x27; +
                            &#x27;and not(@type=&#x22;submit&#x22;)]&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return &#x27;get&#x27;;
}
};

form.getParams = function (node) {
var params = {},
    submit = form.getSubmitButton(node),
    inputs = form.<span class="apidocCodeKeywordSpan">getInputs</span>(node),
    length = inputs.length,
    i = 0, input, name, nodeName, type, value;

for (i = 0; i &#x3c; length; i++) {
    input = inputs[i];
    name = input.getAttribute(&#x27;name&#x27;);
    type = input.getAttribute(&#x27;type&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Form.getMethod" id="apidoc.element.osmosis.Form.getMethod">
        function <span class="apidocSignatureSpan">osmosis.Form.</span>getMethod
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getMethod = function (node) {
    if (node.hasAttribute(&#x27;method&#x27;)) {
        return node.getAttribute(&#x27;method&#x27;).toLowerCase();
    } else if (node.hasAttribute(&#x27;formmethod&#x27;)) {
        return node.getAttribute(&#x27;formmethod&#x27;).toLowerCase();
    } else {
        return &#x27;get&#x27;;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

params = form.getParams(loginForm);
params[userInput.getAttribute(&#x27;name&#x27;)] = user;
params[passInput.getAttribute(&#x27;name&#x27;)] = pass;

url = form.getAction(loginForm);
method = form.<span class="apidocCodeKeywordSpan">getMethod</span>(loginForm);

this.debug(method + &#x27; &#x27; + url + &#x27; &#x27; + JSON.stringify(params));

this.request(method,
             loginForm,
             url,
             params,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Form.getParams" id="apidoc.element.osmosis.Form.getParams">
        function <span class="apidocSignatureSpan">osmosis.Form.</span>getParams
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getParams = function (node) {
    var params = {},
        submit = form.getSubmitButton(node),
        inputs = form.getInputs(node),
        length = inputs.length,
        i = 0, input, name, nodeName, type, value;

    for (i = 0; i &#x3c; length; i++) {
        input = inputs[i];
        name = input.getAttribute(&#x27;name&#x27;);
        type = input.getAttribute(&#x27;type&#x27;);
        nodeName = input.nodeName;
        value = null;

        if (name.charAt(name.length - 1) === &#x27;]&#x27;) {
            name = name.substr(0, name.length - 2);
        }

        if (type) {
            type = type.toLowerCase();
        }

        switch (nodeName) {
            case &#x27;select&#x27;:
                input = input.get(&#x27;option[selected]&#x27;) ||
                        input.get(&#x27;option:first&#x27;);

                if (input !== null) {
                    if (input.hasAttribute(&#x27;value&#x27;)) {
                        value = input.getAttribute(&#x27;value&#x27;);
                    } else {
                        value = input.textContent;
                    }
                }

                break;
            case &#x27;textarea&#x27;:
                value = input.textContent;
                break;
            case &#x27;input&#x27;:
                switch (type) {
                    case &#x27;radio&#x27;:
                    case &#x27;image&#x27;:
                        [&#x27;x&#x27;, &#x27;y&#x27;].forEach(function (p) {
                            var array = [];

                            if (name) {
                                array.push(name);
                            }

                            array.push(p);

                            params[array.join(&#x27;.&#x27;)] = 0;
                        });
                    case &#x27;checkbox&#x27;:
                        if (!input.hasAttribute(&#x27;checked&#x27;))  {
                            break;
                        }

                        name  = name.replace(/\[\]$/, &#x27;&#x27;);
                        value = input.getAttribute(&#x27;value&#x27;) || &#x27;on&#x27;;

                        break;
                    default:
                        value = input.getAttribute(&#x27;value&#x27;);
                        break;

                }
                break;
        }

        if (value !== null) {
            if (params[name] instanceof Array) {
                params[name].push(value);
            } else if (params[name] !== undefined) {
                params[name] = [params[name], value];
            } else {
                params[name] = value;
            }
        }
    }

    if (submit !== null) {
        if (submit.hasAttribute(&#x27;name&#x27;)) {
            params[submit.getAttribute(&#x27;name&#x27;)] =
                submit.getAttribute(&#x27;value&#x27;) || &#x27;Submit Query&#x27;;
        }
    }

    return params;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
passInput = userInput.get(&#x27;following::input[type=&#x22;password&#x22;]&#x27;);

if (!passInput) {
    done(&#x27;No password field found&#x27;);
    return;
}

params = form.<span class="apidocCodeKeywordSpan">getParams</span>(loginForm);
params[userInput.getAttribute(&#x27;name&#x27;)] = user;
params[passInput.getAttribute(&#x27;name&#x27;)] = pass;

url = form.getAction(loginForm);
method = form.getMethod(loginForm);

this.debug(method + &#x27; &#x27; + url + &#x27; &#x27; + JSON.stringify(params));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Form.getSubmitButton" id="apidoc.element.osmosis.Form.getSubmitButton">
        function <span class="apidocSignatureSpan">osmosis.Form.</span>getSubmitButton
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getSubmitButton = function (node) {
    if (form.isForm(node)) {
        return node.get(&#x27;[@type=&#x22;submit&#x22; and not(@disabled) and &#x27; +
                        &#x27;(not(@form) or @form=&#x22;&#x27; +
                            node.getAttribute(&#x27;id&#x27;) + &#x27;&#x22;&#x27; +
                        &#x27;)][1]&#x27;);
    } else if ((node.nodeName === &#x27;input&#x27; || node.nodeName === &#x27;button&#x27;) &#x26;&#x26;
                node.getAttribute(&#x27;type&#x27;) === &#x27;submit&#x27;) {
        return node;
    }

    return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
} else {
    return &#x27;get&#x27;;
}
};

form.getParams = function (node) {
var params = {},
    submit = form.<span class="apidocCodeKeywordSpan">getSubmitButton</span>(node),
    inputs = form.getInputs(node),
    length = inputs.length,
    i = 0, input, name, nodeName, type, value;

for (i = 0; i &#x3c; length; i++) {
    input = inputs[i];
    name = input.getAttribute(&#x27;name&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Form.isForm" id="apidoc.element.osmosis.Form.isForm">
        function <span class="apidocSignatureSpan">osmosis.Form.</span>isForm
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isForm = function (node) {
    return node.nodeName === &#x27;form&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

form.isForm = function (node) {
    return node.nodeName === &#x27;form&#x27;;
};

form.getForm = function (node) {
    if (form.<span class="apidocCodeKeywordSpan">isForm</span>(node)) {
        return node;
    } else if (node.hasAttribute(&#x27;form&#x27;)) {
        return node.doc().getElementById(node.getAttribute(&#x27;form&#x27;));
    } else {
        return node.get(&#x27;ancestor-or-self::form&#x27;);
    }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Form.isMultipart" id="apidoc.element.osmosis.Form.isMultipart">
        function <span class="apidocSignatureSpan">osmosis.Form.</span>isMultipart
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isMultipart = function (node) {
    if (node.hasAttribute === undefined) {
        return false;
    }

    return (form.getEnctype(node).substr(0, 5) === &#x27;multi&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        opts.cookies = extend(document.cookies, opts.cookies);
    } else {
        opts.cookies = document.cookies;
    }

    if (method === &#x27;post&#x27;) {
        // Check the enctype if submitting a form
        if (formFunctions.<span class="apidocCodeKeywordSpan">isMultipart</span>(context)) {
            opts.multipart = true;
        }
    }
} else if (href.substr(0, 1) === &#x27;//&#x27;) {
    url = URL.parse(&#x27;http:&#x27; + href, true);
} else if (href.substr(0, 4) !== &#x27;http&#x27;) {
    url = URL.parse(&#x27;http://&#x27; + href, true);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Form.submit" id="apidoc.element.osmosis.Form.submit">
        function <span class="apidocSignatureSpan">osmosis.Form.</span>submit
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">submit = function () {

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *       Add input[name] case-insensitivity tests
 */

module.exports.form1 = function (assert) {
var calledThen = false;

osmosis.get(url + &#x27;/submit-form&#x27;)
.<span class="apidocCodeKeywordSpan">submit</span>(&#x27;form&#x27;)
.then(function (context) {
    calledThen = true;
    assert.deepEqual(JSON.parse(context.get(&#x27;#data&#x27;).text()), getInputs(1, &#x27;sub1&#x27;));
})
.done(function () {
    assert.ok(calledThen);
    assert.done();
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.Queue" id="apidoc.module.osmosis.Queue">module osmosis.Queue</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.Queue.Queue" id="apidoc.element.osmosis.Queue.Queue">
        function <span class="apidocSignatureSpan">osmosis.</span>Queue
        <span class="apidocSignatureSpan">(instance)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Queue(instance) {
    this.instance = instance;
    this.opts = instance.opts;
    this.queue = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.Queue.prototype" id="apidoc.module.osmosis.Queue.prototype">module osmosis.Queue.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.Queue.prototype.dequeue" id="apidoc.element.osmosis.Queue.prototype.dequeue">
        function <span class="apidocSignatureSpan">osmosis.Queue.prototype.</span>dequeue
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dequeue = function () {
    var object = this.queue[--this.length];

    this.queue[this.length] = null;

    return object;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Osmosis.prototype.dequeueRequest = function () {
   var arr, length = this.queue.length;

   if (length === 0 || this.queue.requests &#x3e;= this.opts.concurrency) {
       return;
   }

   arr = this.queue.<span class="apidocCodeKeywordSpan">dequeue</span>();

   this.request(arr[0], arr[1], arr[2], arr[3]);
};

/**
* Parse XML/HTML data.
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Queue.prototype.enqueue" id="apidoc.element.osmosis.Queue.prototype.enqueue">
        function <span class="apidocSignatureSpan">osmosis.Queue.prototype.</span>enqueue
        <span class="apidocSignatureSpan">(object)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">enqueue = function (object) {
    this.queue[this.length++] = object;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (tries === undefined) {
    tries = 0;
}

if (this.queue.requests &#x3c; this.opts.concurrency) {
    this.request(url, opts, callback, tries);
} else {
    this.queue.<span class="apidocCodeKeywordSpan">enqueue</span>([url, opts, callback, tries]);
}
};

Osmosis.prototype.dequeueRequest = function () {
var arr, length = this.queue.length;

if (length === 0 || this.queue.requests &#x3e;= this.opts.concurrency) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Queue.prototype.pop" id="apidoc.element.osmosis.Queue.prototype.pop">
        function <span class="apidocSignatureSpan">osmosis.Queue.prototype.</span>pop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pop = function () {
    var self = this;

    if (--self.count === 0) {
        process.nextTick(function () {
            var instance;

            if (self.count === 0) {
                instance = self.instance;
                instance.command.done();

                if (instance.opts.debug === true) {
                    instance.resources();
                }
            }
        });
    }

    this.change++;

    return this.count;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
                            opts.tries + &#x27;)&#x27;);
        }
    } else {
        callback(err, res, data);
    }

    self.dequeueRequest();
    self.queue.<span class="apidocCodeKeywordSpan">pop</span>();
})
.on(&#x27;redirect&#x27;, function (new_url) {
    if (self.opts.log === true) {
        self.command.log(&#x27;[redirect] &#x27; +
                         href + &#x27; -&#x3e; &#x27; + new_url);
    }
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.Queue.prototype.push" id="apidoc.element.osmosis.Queue.prototype.push">
        function <span class="apidocSignatureSpan">osmosis.Queue.prototype.</span>push
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">push = function () {
    if (++this.change &#x3e;= 25) {
        if (this.instance.resources !== null) {
            this.instance.resources();
        }

        this.change = 0;
    }

    return ++this.count;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var self = this,
    href   = url.href,
    method = url.method,
    params = url.params;

this.requests++;
this.queue.requests++;
this.queue.<span class="apidocCodeKeywordSpan">push</span>();

request(url.method,
        url,
        url.params,
        opts,
        tries,
        function (err, res, data) {
...</pre></li>
    </ul>












</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.click" id="apidoc.module.osmosis.click">module osmosis.click</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.click.click" id="apidoc.element.osmosis.click.click">
        function <span class="apidocSignatureSpan">osmosis.</span>click
        <span class="apidocSignatureSpan">(context, data, next, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Click(context, data, next, done) {
    var self     = this,
        selector = this.args[0],
        nodes    = context.find(selector),
        window;

    if (nodes.length === 0) {
        if (this.getOpts().debug === true) {
            this.debug(&#x27;no results for &#x22;&#x27; + selector + &#x27;&#x22;&#x27;);
        }

        return done();
    }

    window = context.doc().defaultView;
    window.addEventListener(&#x27;done&#x27;, function () {
        nodes.forEach(function (node, index) {
            node.dispatchEvent(&#x27;click&#x27;);

            window.addEventListener(&#x27;done&#x27;, function () {
                if (index === nodes.length - 1) {
                    next(context, data);
                    done();
                }
            });

        });

    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * DOM and css2xpath functionality have been moved to `libxmljs-dom`
 * Added `keep_data` option to retain the original HTTP response
 * Added `process_response` option for processing data before parsing
 * Added test suite

#### `click`

 * Added `.<span class="apidocCodeKeywordSpan">click</span>()` for interacting with JS-only content

#### `delay`

 * Added `.delay(n)` for waiting n seconds before calling next. Accepts a decimal value.

#### `find`
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.contains" id="apidoc.module.osmosis.contains">module osmosis.contains</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.contains.contains" id="apidoc.element.osmosis.contains.contains">
        function <span class="apidocSignatureSpan">osmosis.</span>contains
        <span class="apidocSignatureSpan">(string)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">contains = function (string) {
    this.string = string;
    return Contains;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `config`

 * Configuration options are inherited down the chain

#### `contains`

 * Added `.<span class="apidocCodeKeywordSpan">contains</span>(string)` to discard nodes whose contents do not match `string`

#### `do`

 * Added `.do()` to call one or more commands using the current context

#### `failure` (or `fail`)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.delay" id="apidoc.module.osmosis.delay">module osmosis.delay</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.delay.delay" id="apidoc.element.osmosis.delay.delay">
        function <span class="apidocSignatureSpan">osmosis.</span>delay
        <span class="apidocSignatureSpan">(delay)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">delay = function (delay) {
    this.delay = delay;

    if (this.delay % 1 !== 0) {
        this.delay = this.delay * 1000;
    }

    return Delay;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `click`

 * Added `.click()` for interacting with JS-only content

#### `delay`

 * Added `.<span class="apidocCodeKeywordSpan">delay</span>(n)` for waiting n seconds before calling next. Accepts a decimal value
.

#### `find`

 * Accepts an array of selectors as the first argument

#### `follow`
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.do" id="apidoc.module.osmosis.do">module osmosis.do</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.do.do" id="apidoc.element.osmosis.do.do">
        function <span class="apidocSignatureSpan">osmosis.</span>do
        <span class="apidocSignatureSpan">(context, data, next, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">do = function (context, data, next, done) {
    var args   = this.args,
        length = args.length,
        pending = length,
        dataDone = function () {
            if (--pending !== 0) {
                return;
            }

            next(context, data);
            done();
        }, i;

    for (i = 0; i &#x3c; length; i++) {
        args[i].start(context, data.child().done(dataDone));
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `contains`

 * Added `.contains(string)` to discard nodes whose contents do not match `string`

#### `do`

 * Added `.<span class="apidocCodeKeywordSpan">do</span>()` to call one or more commands using the current context

#### `failure` (or `fail`)

 * Added `.failure(selector)` to discard nodes that match the given selector

#### `filter` (or `success`)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.fail" id="apidoc.module.osmosis.fail">module osmosis.fail</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.fail.fail" id="apidoc.element.osmosis.fail.fail">
        function <span class="apidocSignatureSpan">osmosis.</span>fail
        <span class="apidocSignatureSpan">(selector)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fail = function (selector) {
    this.selector = selector;
    return Fail;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

module.exports.fail = function (assert) {
var count = 0, errored = false;

osmosis
.parse(html)
.find(&#x22;b&#x22;)
.<span class="apidocCodeKeywordSpan">fail</span>(&#x22;node():contains(&#x27;1&#x27;)&#x22;)
.then(function () {
    count++;
})
.error(function (msg) {
    if (msg.indexOf(&#x27;node():contains&#x27;) &#x3e; -1) {
        errored = true;
    }
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.filter" id="apidoc.module.osmosis.filter">module osmosis.filter</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.filter.filter" id="apidoc.element.osmosis.filter.filter">
        function <span class="apidocSignatureSpan">osmosis.</span>filter
        <span class="apidocSignatureSpan">(selector)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">filter = function (selector) {
    this.selector = selector;
    return Filter;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `failure` (or `fail`)

* Added `.failure(selector)` to discard nodes that match the given selector

#### `filter` (or `success`)

* Added `.<span class="apidocCodeKeywordSpan">filter</span>(selector)` to discard nodes that do not match the given selector

#### `get`

* Accepts a tokenized URL string
   * @{...} - Request info (url, method, params, headers, etc.)
   * %{...} - `data` object
   * ${...} - `context` search
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.find" id="apidoc.module.osmosis.find">module osmosis.find</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.find.find" id="apidoc.element.osmosis.find.find">
        function <span class="apidocSignatureSpan">osmosis.</span>find
        <span class="apidocSignatureSpan">(selector)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">find = function (selector) {
    var self = this;

    if (typeof selector === &#x27;function&#x27;) {
        this.contextCallback = selector;
    } else if (selector instanceof Array) {
        this.selector = selector.join(&#x27;, &#x27;);
    } else {
        this.selector = selector;
    }


    // Search relative to the context node
    if (this.name === &#x27;select&#x27;) {
        this.relative = true;
    } else {
        // Wait to see if we&#x27;re a nested instance
        process.nextTick(function () {
            if (self.instance.parent !== undefined) {
                self.relative = true;
            }
        });
    }

    return Find;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// libxmljs overrides:

libxml.Document.prototype.findXPath = libxml.Document.prototype.find;
libxml.Element.prototype.findXPath  = libxml.Element.prototype.find;

libxml.Document.prototype.find = function (selector, cache) {
return this.root().<span class="apidocCodeKeywordSpan">find</span>(selector, cache);
};

libxml.Element.prototype.find = function (selector) {
if (selector.charAt(1) === &#x27;/&#x27; ||
    selector.charAt(0) === &#x27;/&#x27; ||
    selector.charAt(0) === &#x27;(&#x27;) {
    return this.findXPath(selector);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.find.select" id="apidoc.element.osmosis.find.select">
        function <span class="apidocSignatureSpan">osmosis.find.</span>select
        <span class="apidocSignatureSpan">(selector)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">select = function (selector) {
    var self = this;

    if (typeof selector === &#x27;function&#x27;) {
        this.contextCallback = selector;
    } else if (selector instanceof Array) {
        this.selector = selector.join(&#x27;, &#x27;);
    } else {
        this.selector = selector;
    }


    // Search relative to the context node
    if (this.name === &#x27;select&#x27;) {
        this.relative = true;
    } else {
        // Wait to see if we&#x27;re a nested instance
        process.nextTick(function () {
            if (self.instance.parent !== undefined) {
                self.relative = true;
            }
        });
    }

    return Find;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

module.exports.select = function (assert) {
var count = 0;

osmosis.get(url + &#x27;/find&#x27;)
.find(&#x27;ul:last &#x3e; li:last&#x27;)
.<span class="apidocCodeKeywordSpan">select</span>(&#x27;b&#x27;)
.then(function () {
    count++;
})
.done(function () {
    assert.equal(count, 2);
    assert.done();
});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.follow" id="apidoc.module.osmosis.follow">module osmosis.follow</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.follow.follow" id="apidoc.element.osmosis.follow.follow">
        function <span class="apidocSignatureSpan">osmosis.</span>follow
        <span class="apidocSignatureSpan">(context, data, next, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">follow = function (context, data, next, done) {
    var selector = this.args[0],
        self     = this,
        nodes    = context.find(selector),
        document = context.doc(),
        i = 0, queue = 0, length, node, url,
        requestDone = function (err, document) {
            if (err === null) {
                next(document, data);
            }

            if (--queue === 0) {
                done();
            }
        };

    if (nodes === undefined || nodes.length === 0) {
        done(&#x27;no results for &#x22;&#x27; + selector +
             &#x27;&#x22; in &#x27; + document.location.href);
        return;
    }


    for (length = nodes.length, i = 0; i &#x3c; length; i++) {
        node = nodes[i];

        if (node.value !== undefined) {
            url = node.value();
        } else if (url = node.attr(&#x27;href&#x27;)) {
            // Don&#x27;t use Attribute.text() or Attribute.value()
            // in order to keep URL encoding
            url = url.toString();
            url = url.substring(url.indexOf(&#x27;&#x22;&#x27;) + 1, url.lastIndexOf(&#x27;&#x22;&#x27;));
        } else {
            url = node.text();
        }

        if (url !== null &#x26;&#x26; url.length &#x3e; 0) {
            queue++;

            self.log(&#x22;url: &#x22; + url);
            self.request(&#x27;get&#x27;,
                        context,
                        url,
                        null,
                        requestDone);
        }
    }

    if (queue === 0) {
        done();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
var osmosis = require(&#x27;osmosis&#x27;);

osmosis
.get(&#x27;www.craigslist.org/about/sites&#x27;)
.find(&#x27;h1 + div a&#x27;)
.set(&#x27;location&#x27;)
.<span class="apidocCodeKeywordSpan">follow</span>(&#x27;@href&#x27;)
.find(&#x27;header + div + div li &#x3e; a&#x27;)
.set(&#x27;category&#x27;)
.follow(&#x27;@href&#x27;)
.paginate(&#x27;.totallink + a.button.next:first&#x27;)
.find(&#x27;p &#x3e; a&#x27;)
.follow(&#x27;@href&#x27;)
.set({
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.get" id="apidoc.module.osmosis.get">module osmosis.get</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.get.get" id="apidoc.element.osmosis.get.get">
        function <span class="apidocSignatureSpan">osmosis.</span>get
        <span class="apidocSignatureSpan">(url, query)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (url, query) {
    var args  = this.args,
        urlIsFunction   = typeof url === &#x27;function&#x27;,
        queryIsFunction = typeof query === &#x27;function&#x27;;

    if (typeof args[3] === &#x27;object&#x27; || typeof args[4] === &#x27;object&#x27;) {
        console.error(&#x22;GET/POST: `opts` argument deprecated.&#x22; +
                      &#x22;Use `.config` instead.&#x22;);
    }

    if (typeof args[3] === &#x27;function&#x27; || typeof args[4] === &#x27;function&#x27;) {
        console.error(&#x22;GET/POST: `callback` argument deprecated.&#x22; +
                      &#x22;Use `.then` instead.&#x22;);
    }

    if (urlIsFunction === true) {
        this.getURL = getURLFunction;
    } else {
        this.getURL = getURLArg;
    }

    this.url    = url;
    this.params = query;

    return Get;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {object} [params] - GET query parameters
* @returns Command
* @see {@link Command.run}
*
* @example {@lang javascript}
*
* // These instances start immediately
* osmosis.<span class="apidocCodeKeywordSpan">get</span>(&#x27;http://example.com&#x27;);
* osmosis(&#x27;http://example.com&#x27;);
*
* // These instances need started
* instance = new osmosis.get(&#x27;http://example.com&#x27;);
* instance.run();
*
* instance = new osmosis(&#x27;http://example.com&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.osmosis.get.post" id="apidoc.element.osmosis.get.post">
        function <span class="apidocSignatureSpan">osmosis.get.</span>post
        <span class="apidocSignatureSpan">(url, query)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">post = function (url, query) {
    var args  = this.args,
        urlIsFunction   = typeof url === &#x27;function&#x27;,
        queryIsFunction = typeof query === &#x27;function&#x27;;

    if (typeof args[3] === &#x27;object&#x27; || typeof args[4] === &#x27;object&#x27;) {
        console.error(&#x22;GET/POST: `opts` argument deprecated.&#x22; +
                      &#x22;Use `.config` instead.&#x22;);
    }

    if (typeof args[3] === &#x27;function&#x27; || typeof args[4] === &#x27;function&#x27;) {
        console.error(&#x22;GET/POST: `callback` argument deprecated.&#x22; +
                      &#x22;Use `.then` instead.&#x22;);
    }

    if (urlIsFunction === true) {
        this.getURL = getURLFunction;
    } else {
        this.getURL = getURLArg;
    }

    this.url    = url;
    this.params = query;

    return Get;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    osmosis(url + &#x27;/headers&#x27;)
.then(function (context) {
    assert.ok(context.querySelector(&#x27;cookie&#x27;));
    assert.equal(context.querySelector(&#x27;cookie&#x27;).textContent,
                &#x27;gc1=set&#x27;);
})
.<span class="apidocCodeKeywordSpan">post</span>(url + &#x27;/headers&#x27;)
.cookie(&#x27;c1&#x27;, &#x27;yes&#x27;)
.then(function (context) {
    assert.ok(context.querySelector(&#x27;cookie&#x27;));
    assert.equal(context.querySelector(&#x27;cookie&#x27;).textContent,
                &#x27;gc1=set; c1=yes&#x27;);
})
.done(function () {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.if" id="apidoc.module.osmosis.if">module osmosis.if</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.if.if" id="apidoc.element.osmosis.if.if">
        function <span class="apidocSignatureSpan">osmosis.</span>if
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">if = function () {

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.learn" id="apidoc.module.osmosis.learn">module osmosis.learn</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.learn.learn" id="apidoc.element.osmosis.learn.learn">
        function <span class="apidocSignatureSpan">osmosis.</span>learn
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">learn = function () {
    this.nodeSet = [];
    return Learn;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



# Changelog

#### TODO:

* Add `.<span class="apidocCodeKeywordSpan">learn</span>()` to generate a selector for a selected node
* Add `.listen()` for easily creating DOM event listeners
* Add `.trigger()` for easily triggering DOM events
* Add `.on()` for binding callback to a local-only event
* Add `.url()` to set the current URL
* Add `.params()` to set the current URL parameters
* Add `.save()` to save response data to a file
* Add `.add()`, `.remove()` for node creation/deletion?
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.login" id="apidoc.module.osmosis.login">module osmosis.login</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.login.login" id="apidoc.element.osmosis.login.login">
        function <span class="apidocSignatureSpan">osmosis.</span>login
        <span class="apidocSignatureSpan">(username, password)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">login = function (username, password) {
    this.username = username;
    this.password = password;
    return Login;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
pass = &#x27;pass&#x27;;

module.exports.form = function (assert) {
var errors = 0;

osmosis
.get(url + &#x27;/form&#x27;)
.<span class="apidocCodeKeywordSpan">login</span>(user, pass)
.success(&#x27;div:contains(&#x22;authenticated&#x22;)&#x27;)
.then(function (context) {
    assert.equal(context.get(&#x27;div&#x27;).text(), &#x27;authenticated&#x27;);
})
.follow(&#x27;a&#x27;)
.then(function (context) {
    var div = context.get(&#x27;div&#x27;);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.match" id="apidoc.module.osmosis.match">module osmosis.match</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.match.match" id="apidoc.element.osmosis.match.match">
        function <span class="apidocSignatureSpan">osmosis.</span>match
        <span class="apidocSignatureSpan">(regex)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">match = function (regex) {
    this.regex = regex;
    return Match;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `headers` (or `header`)

* Added `headers({ key: value })` and `header(key, value)` to set HTTP headers

#### `match`

 * Added `.<span class="apidocCodeKeywordSpan">match</span>([selector], RegExp)` to discard nodes whose contents do not match

#### `rewrite`

 * Added `.rewrite(callback)` to set a URL rewriting function for the preceding request

### Internal changes:
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.paginate" id="apidoc.module.osmosis.paginate">module osmosis.paginate</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.paginate.paginate" id="apidoc.element.osmosis.paginate.paginate">
        function <span class="apidocSignatureSpan">osmosis.</span>paginate
        <span class="apidocSignatureSpan">(selector, limit)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">paginate = function (selector, limit) {
    this.selector = selector;
    this.limit = limit;

    switch (typeof limit) {
        case &#x27;string&#x27;:
            this.getLimit = getLimitSelector;
            break;
        case &#x27;function&#x27;:
            this.getLimit = getLimitFunction;
            break;
        default:
            this.getLimit = getLimitArg;
            break;
    }

    return Paginate;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.get(&#x27;www.craigslist.org/about/sites&#x27;)
.find(&#x27;h1 + div a&#x27;)
.set(&#x27;location&#x27;)
.follow(&#x27;@href&#x27;)
.find(&#x27;header + div + div li &#x3e; a&#x27;)
.set(&#x27;category&#x27;)
.follow(&#x27;@href&#x27;)
.<span class="apidocCodeKeywordSpan">paginate</span>(&#x27;.totallink + a.button.next:first&#x27;)
.find(&#x27;p &#x3e; a&#x27;)
.follow(&#x27;@href&#x27;)
.set({
&#x27;title&#x27;:        &#x27;section &#x3e; h2&#x27;,
&#x27;description&#x27;:  &#x27;#postingbody&#x27;,
&#x27;subcategory&#x27;:  &#x27;div.breadbox &#x3e; span[4]&#x27;,
&#x27;date&#x27;:         &#x27;time@datetime&#x27;,
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.parse" id="apidoc.module.osmosis.parse">module osmosis.parse</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.parse.parse" id="apidoc.element.osmosis.parse.parse">
        function <span class="apidocSignatureSpan">osmosis.</span>parse
        <span class="apidocSignatureSpan">(context, data, next, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (context, data, next, done) {
    var args = this.args;

    next(this.instance.parse(args[0], args[1]), data);
    done();
    return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (length === 3) {
        opts.parse = false;
    }

    if (context !== undefined) {
        document = context.doc();

        url = URL.<span class="apidocCodeKeywordSpan">parse</span>(document.location.resolve(href), true);

        if (opts.follow_set_referer !== false) {
if (opts.headers === undefined) {
    opts.headers = {};
}

opts.headers.referer = document.location.href;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.rewrite" id="apidoc.module.osmosis.rewrite">module osmosis.rewrite</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.rewrite.rewrite" id="apidoc.element.osmosis.rewrite.rewrite">
        function <span class="apidocSignatureSpan">osmosis.</span>rewrite
        <span class="apidocSignatureSpan">(context, data, next, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">rewrite = function (context, data, next, done) {
    console.error(&#x27;DEPRECATED. Use .find(selector).get(callback) instead.&#x27;);
    next(context, data);
    done();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### `match`

 * Added `.match([selector], RegExp)` to discard nodes whose contents do not match

#### `rewrite`

 * Added `.<span class="apidocCodeKeywordSpan">rewrite</span>(callback)` to set a URL rewriting function for the preceding request

### Internal changes:

 * `promise.args` is now an object (used to be an array)
 * HTTP 400 errors are now logged and the requests are retried.

## 0.0.9
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.set" id="apidoc.module.osmosis.set">module osmosis.set</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.set.set" id="apidoc.element.osmosis.set.set">
        function <span class="apidocSignatureSpan">osmosis.</span>set
        <span class="apidocSignatureSpan">(key, val)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set = function (key, val) {
    var args = key,
        isArray = args instanceof Array;

    if (val !== undefined) {
        args = {};
        args[key] = val;
    } else if (typeof key === &#x27;string&#x27;) {
        args = {};
        args[key] = null;
    }

    return setObject(loopObject(args, isArray), isArray);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* Replaces previously set values

### Internal changes:

* Enhanced stack counting
* Added data object ref counting
* Added domain specific cookie handling
* Improved stability of deep instance nesting with `.<span class="apidocCodeKeywordSpan">set</span>()`
* Osmosis instances operate more independently
* Request queues are now a single array for each instance
* Promises must accept and call `done` if they asynchronously
  send more than one output context per input context
* If `.then` sends more than one output context per input context,
  then it must accept `done()` as its last argument and
  call it after calling `next()` for the last time.
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.submit" id="apidoc.module.osmosis.submit">module osmosis.submit</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.submit.submit" id="apidoc.element.osmosis.submit.submit">
        function <span class="apidocSignatureSpan">osmosis.</span>submit
        <span class="apidocSignatureSpan">(selector, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">submit = function (selector, params) {
    this.selector = selector;
    this.params = params;
    return Submit;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *       Add input[name] case-insensitivity tests
 */

module.exports.form1 = function (assert) {
var calledThen = false;

osmosis.get(url + &#x27;/submit-form&#x27;)
.<span class="apidocCodeKeywordSpan">submit</span>(&#x27;form&#x27;)
.then(function (context) {
    calledThen = true;
    assert.deepEqual(JSON.parse(context.get(&#x27;#data&#x27;).text()), getInputs(1, &#x27;sub1&#x27;));
})
.done(function () {
    assert.ok(calledThen);
    assert.done();
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.success" id="apidoc.module.osmosis.success">module osmosis.success</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.success.success" id="apidoc.element.osmosis.success.success">
        function <span class="apidocSignatureSpan">osmosis.</span>success
        <span class="apidocSignatureSpan">(selector)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">success = function (selector) {
    this.selector = selector;
    return Success;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

module.exports.form = function (assert) {
var errors = 0;

osmosis
.get(url + &#x27;/form&#x27;)
.login(user, pass)
.<span class="apidocCodeKeywordSpan">success</span>(&#x27;div:contains(&#x22;authenticated&#x22;)&#x27;)
.then(function (context) {
    assert.equal(context.get(&#x27;div&#x27;).text(), &#x27;authenticated&#x27;);
})
.follow(&#x27;a&#x27;)
.then(function (context) {
    var div = context.get(&#x27;div&#x27;);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.then" id="apidoc.module.osmosis.then">module osmosis.then</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.then.then" id="apidoc.element.osmosis.then.then">
        function <span class="apidocSignatureSpan">osmosis.</span>then
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">then = function (callback) {
    var getContext   = getContextArg, contextArg;

    if (callback.length &#x3e; 0) {
        contextArg = callback.toString().match(regexp_function_arg)[2];
    }

    if (contextArg === &#x27;$&#x27;) {
        getContext = getJQueryArg;
    } else if (contextArg === &#x27;window&#x27;) {
        getContext = getWindowArg;
    } else if (contextArg === &#x27;document&#x27;) {
        getContext = getDocumentArg;
    }

    return Then(callback, getContext);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            case &#x27;object&#x27;:
                if (obj[key] !== null) {
                    obj[key] = this.findCommandArg(obj[key]);
                }

                break;
            case &#x27;function&#x27;:
                obj[key] = this.findCommandArg(this.<span class="apidocCodeKeywordSpan">then</span>(obj[key]));
        }
    }

    return obj;
};

fs.readdirSync(cmdDir).forEach(function (file) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.train" id="apidoc.module.osmosis.train">module osmosis.train</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.train.train" id="apidoc.element.osmosis.train.train">
        function <span class="apidocSignatureSpan">osmosis.</span>train
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">train = function () {
    return Train;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.trigger" id="apidoc.module.osmosis.trigger">module osmosis.trigger</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.trigger.trigger" id="apidoc.element.osmosis.trigger.trigger">
        function <span class="apidocSignatureSpan">osmosis.</span>trigger
        <span class="apidocSignatureSpan">(event, selector)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trigger = function (event, selector) {
    this.event = event;
    this.selector = selector;
    return Trigger;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

# Changelog

#### TODO:

* Add `.learn()` to generate a selector for a selected node
* Add `.listen()` for easily creating DOM event listeners
* Add `.<span class="apidocCodeKeywordSpan">trigger</span>()` for easily triggering DOM events
* Add `.on()` for binding callback to a local-only event
* Add `.url()` to set the current URL
* Add `.params()` to set the current URL parameters
* Add `.save()` to save response data to a file
* Add `.add()`, `.remove()` for node creation/deletion?
* Add `.scroll()` to scrape infinite scroll pages
* Add warnings for parser errors?
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.use" id="apidoc.module.osmosis.use">module osmosis.use</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.use.use" id="apidoc.element.osmosis.use.use">
        function <span class="apidocSignatureSpan">osmosis.</span>use
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">use = function () {

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.osmosis.using" id="apidoc.module.osmosis.using">module osmosis.using</a></h1>


    <h2>
        <a href="#apidoc.element.osmosis.using.using" id="apidoc.element.osmosis.using.using">
        function <span class="apidocSignatureSpan">osmosis.</span>using
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">using = function () {
    return Using;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
